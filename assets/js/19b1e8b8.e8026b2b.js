"use strict";(globalThis.webpackChunkdubuqingfeng=globalThis.webpackChunkdubuqingfeng||[]).push([[8975],{28453:(e,n,i)=>{i.d(n,{R:()=>l,x:()=>t});var r=i(96540);const c={},o=r.createContext(c);function l(e){const n=r.useContext(o);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function t(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(c):e.components||c:l(e.components),r.createElement(o.Provider,{value:n},e.children)}},78499:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>s,contentTitle:()=>t,default:()=>p,frontMatter:()=>l,metadata:()=>r,toc:()=>a});const r=JSON.parse('{"id":"Wiki/programming/php/memory/memory","title":"memory","description":"\u5185\u5b58\u7ba1\u7406\u4e0e\u6027\u80fd\u8981\u70b9","source":"@site/docs/Wiki/programming/php/memory/memory.md","sourceDirName":"Wiki/programming/php/memory","slug":"/Wiki/programming/php/memory/","permalink":"/docs/Wiki/programming/php/memory/","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"laravel","permalink":"/docs/Wiki/programming/php/framework/laravel"},"next":{"title":"oop","permalink":"/docs/Wiki/programming/php/oop/"}}');var c=i(74848),o=i(28453);const l={},t=void 0,s={},a=[{value:"\u5185\u5b58\u7ba1\u7406\u4e0e\u6027\u80fd\u8981\u70b9",id:"\u5185\u5b58\u7ba1\u7406\u4e0e\u6027\u80fd\u8981\u70b9",level:3},{value:"OPcache \u4e0e JIT",id:"opcache-\u4e0e-jit",level:4},{value:"Profiling",id:"profiling",level:4},{value:"\u5185\u5b58\u4e0e\u5b57\u7b26\u4e32\u4f18\u5316",id:"\u5185\u5b58\u4e0e\u5b57\u7b26\u4e32\u4f18\u5316",level:4}];function d(e){const n={code:"code",h3:"h3",h4:"h4",li:"li",p:"p",pre:"pre",ul:"ul",...(0,o.R)(),...e.components};return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(n.h3,{id:"\u5185\u5b58\u7ba1\u7406\u4e0e\u6027\u80fd\u8981\u70b9",children:"\u5185\u5b58\u7ba1\u7406\u4e0e\u6027\u80fd\u8981\u70b9"}),"\n",(0,c.jsx)(n.p,{children:"OPcache\u3001JIT\u3001\u5185\u5b58\u5360\u7528\u4e0e\u5bf9\u8c61\u590d\u5236\uff0c\u6027\u80fd\u8c03\u4f18\u7684\u5e38\u89c1\u6293\u624b\u3002"}),"\n",(0,c.jsx)(n.h4,{id:"opcache-\u4e0e-jit",children:"OPcache \u4e0e JIT"}),"\n",(0,c.jsxs)(n.p,{children:[(0,c.jsx)(n.code,{children:"php.ini"}),"\uff1a"]}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-ini",children:"opcache.enable=1\nopcache.enable_cli=1\nopcache.memory_consumption=256\nopcache.validate_timestamps=0\nopcache.jit=tracing\nopcache.jit_buffer_size=128M\n"})}),"\n",(0,c.jsxs)(n.p,{children:["\u751f\u4ea7\u5efa\u8bae\uff1a\u7981\u7528 timestamp \u9a8c\u8bc1\u3001\u53d1\u5e03\u540e ",(0,c.jsx)(n.code,{children:"opcache_reset()"})," \u6216\u91cd\u542f FPM\u3002"]}),"\n",(0,c.jsx)(n.h4,{id:"profiling",children:"Profiling"}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsx)(n.li,{children:"Xdebug profiler\uff1a\u751f\u6210 cachegrind\uff0c\u7528 KCachegrind \u5206\u6790\uff1b"}),"\n",(0,c.jsx)(n.li,{children:"XHProf/Tideways\uff1a\u5728\u7ebf\u91c7\u6837\u5206\u6790\uff0c\u5f00\u9500\u66f4\u5c0f\uff1b"}),"\n",(0,c.jsx)(n.li,{children:"\u7ed3\u5408 APM \u4e0e\u7cfb\u7edf\u6307\u6807\u5b9a\u4f4d\u74f6\u9888\u3002"}),"\n"]}),"\n",(0,c.jsx)(n.h4,{id:"\u5185\u5b58\u4e0e\u5b57\u7b26\u4e32\u4f18\u5316",children:"\u5185\u5b58\u4e0e\u5b57\u7b26\u4e32\u4f18\u5316"}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsx)(n.li,{children:"\u907f\u514d\u4e0d\u5fc5\u8981\u590d\u5236\uff1a\u5bf9\u5927\u5b57\u7b26\u4e32\u4f7f\u7528\u6d41\u5f0f\u5904\u7406\uff08fopen/stream_filter\uff09\uff1b"}),"\n",(0,c.jsxs)(n.li,{children:["\u8c28\u614e ",(0,c.jsx)(n.code,{children:"json_encode/decode"})," \u70ed\u8def\u5f84\uff1b"]}),"\n",(0,c.jsxs)(n.li,{children:["\u4f7f\u7528\u751f\u6210\u5668 ",(0,c.jsx)(n.code,{children:"yield"})," \u5904\u7406\u5927\u6570\u636e\u96c6\u5408\u3002"]}),"\n"]})]})}function p(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,c.jsx)(n,{...e,children:(0,c.jsx)(d,{...e})}):d(e)}}}]);
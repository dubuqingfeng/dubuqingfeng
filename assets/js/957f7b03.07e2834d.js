"use strict";(self.webpackChunkdubuqingfeng=self.webpackChunkdubuqingfeng||[]).push([[2034],{44098:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>t,contentTitle:()=>l,default:()=>a,frontMatter:()=>s,metadata:()=>i,toc:()=>d});const i=JSON.parse('{"id":"Wiki/programming/nodejs/concurrency/libuv-threadpool","title":"libuv-threadpool","description":"libuv \u7ebf\u7a0b\u6c60\u8981\u70b9","source":"@site/docs/Wiki/programming/nodejs/concurrency/libuv-threadpool.md","sourceDirName":"Wiki/programming/nodejs/concurrency","slug":"/Wiki/programming/nodejs/concurrency/libuv-threadpool","permalink":"/docs/Wiki/programming/nodejs/concurrency/libuv-threadpool","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"cluster","permalink":"/docs/Wiki/programming/nodejs/concurrency/cluster"},"next":{"title":"worker-threads","permalink":"/docs/Wiki/programming/nodejs/concurrency/worker-threads"}}');var o=r(74848),c=r(28453);const s={},l=void 0,t={},d=[{value:"libuv \u7ebf\u7a0b\u6c60\u8981\u70b9",id:"libuv-\u7ebf\u7a0b\u6c60\u8981\u70b9",level:3},{value:"\u8981\u70b9",id:"\u8981\u70b9",level:4},{value:"\u793a\u4f8b\uff1a\u8c03\u6574\u7ebf\u7a0b\u6c60\u5927\u5c0f",id:"\u793a\u4f8b\u8c03\u6574\u7ebf\u7a0b\u6c60\u5927\u5c0f",level:4}];function u(e){const n={code:"code",h3:"h3",h4:"h4",li:"li",p:"p",pre:"pre",ul:"ul",...(0,c.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.h3,{id:"libuv-\u7ebf\u7a0b\u6c60\u8981\u70b9",children:"libuv \u7ebf\u7a0b\u6c60\u8981\u70b9"}),"\n",(0,o.jsx)(n.p,{children:"Node \u7684\u90e8\u5206 API \u901a\u8fc7 libuv \u7ebf\u7a0b\u6c60\u6267\u884c\uff08\u9ed8\u8ba4 4 \u7ebf\u7a0b\uff0c\u53ef\u8c03\uff09\uff0c\u907f\u514d\u963b\u585e\u4e8b\u4ef6\u5faa\u73af\u3002"}),"\n",(0,o.jsx)(n.h4,{id:"\u8981\u70b9",children:"\u8981\u70b9"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:["\u6d89\u53ca API\uff1a",(0,o.jsx)(n.code,{children:"fs"}),"\u3001",(0,o.jsx)(n.code,{children:"crypto"}),"\u3001",(0,o.jsx)(n.code,{children:"dns.resolve"})," \u7b49\uff1b"]}),"\n",(0,o.jsxs)(n.li,{children:["\u5927\u91cf\u5e76\u53d1 I/O\uff1a",(0,o.jsx)(n.code,{children:"UV_THREADPOOL_SIZE"})," \u8c03\u4f18\u4e0e\u4e0a\u9650\uff1b"]}),"\n",(0,o.jsx)(n.li,{children:"\u76d1\u63a7\uff1a\u961f\u5217\u5806\u79ef\u5bfc\u81f4\u7684\u5ef6\u8fdf\uff1b"}),"\n",(0,o.jsx)(n.li,{children:"\u53d6\u820d\uff1aCPU \u5bc6\u96c6\u578b\u4efb\u52a1\u5efa\u8bae Worker Threads\u3002"}),"\n"]}),"\n",(0,o.jsx)(n.h4,{id:"\u793a\u4f8b\u8c03\u6574\u7ebf\u7a0b\u6c60\u5927\u5c0f",children:"\u793a\u4f8b\uff1a\u8c03\u6574\u7ebf\u7a0b\u6c60\u5927\u5c0f"}),"\n",(0,o.jsx)(n.p,{children:"\u5728\u542f\u52a8\u524d\u8bbe\u7f6e\u73af\u5883\u53d8\u91cf\uff08\u53d7\u8fdb\u7a0b\u8bfb\u53d6\uff0c\u8fd0\u884c\u671f\u4fee\u6539\u65e0\u6548\uff09\uff1a"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"UV_THREADPOOL_SIZE=16 node server.js\n"})}),"\n",(0,o.jsxs)(n.p,{children:["\u793a\u4f8b\u4efb\u52a1\uff08",(0,o.jsx)(n.code,{children:"crypto.pbkdf2"})," CPU \u5bc6\u96c6\u578b\uff09\u4f1a\u4f7f\u7528\u7ebf\u7a0b\u6c60\uff1a"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-js",children:"import { pbkdf2 } from 'node:crypto';\nfor (let i = 0; i < 100; i++) {\n  pbkdf2('p', 's', 1e6, 64, 'sha512', () => console.log('done', i));\n}\n"})}),"\n",(0,o.jsx)(n.p,{children:"\u4e0e\u5916\u90e8\u670d\u52a1\u534f\u540c\uff1a\u5bf9\u4e0b\u6e38\uff08DB/HTTP\uff09\u8bbe\u7f6e\u5e76\u53d1\u4e0a\u9650\u4e0e\u91cd\u8bd5\u9000\u907f\uff0c\u907f\u514d\u7ebf\u7a0b\u6c60\u5806\u79ef\u5bfc\u81f4\u6574\u4f53\u5ef6\u8fdf\u6269\u6563\u3002"})]})}function a(e={}){const{wrapper:n}={...(0,c.R)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(u,{...e})}):u(e)}},28453:(e,n,r)=>{r.d(n,{R:()=>s,x:()=>l});var i=r(96540);const o={},c=i.createContext(o);function s(e){const n=i.useContext(c);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:s(e.components),i.createElement(c.Provider,{value:n},e.children)}}}]);
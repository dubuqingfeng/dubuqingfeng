"use strict";(self.webpackChunkdubuqingfeng=self.webpackChunkdubuqingfeng||[]).push([[4300],{1591:(i,e,n)=>{n.r(e),n.d(e,{assets:()=>o,contentTitle:()=>t,default:()=>p,frontMatter:()=>r,metadata:()=>c,toc:()=>d});const c=JSON.parse('{"id":"Wiki/blockchain/bitcoin/script/overview","title":"overview","description":"\u811a\u672c\u7cfb\u7edf\u6982\u89c8\uff08Script\uff09","source":"@site/docs/Wiki/blockchain/bitcoin/script/overview.md","sourceDirName":"Wiki/blockchain/bitcoin/script","slug":"/Wiki/blockchain/bitcoin/script/overview","permalink":"/docs/Wiki/blockchain/bitcoin/script/overview","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"mempool","permalink":"/docs/Wiki/blockchain/bitcoin/policy/mempool"},"next":{"title":"standardness","permalink":"/docs/Wiki/blockchain/bitcoin/script/standardness"}}');var s=n(74848),l=n(28453);const r={},t=void 0,o={},d=[{value:"\u811a\u672c\u7cfb\u7edf\u6982\u89c8\uff08Script\uff09",id:"\u811a\u672c\u7cfb\u7edf\u6982\u89c8script",level:2},{value:"\u8bbe\u8ba1\u76ee\u6807",id:"\u8bbe\u8ba1\u76ee\u6807",level:3},{value:"\u5e38\u89c1\u6a21\u677f",id:"\u5e38\u89c1\u6a21\u677f",level:3},{value:"\u8d44\u6e90\u4e0e\u9650\u5236",id:"\u8d44\u6e90\u4e0e\u9650\u5236",level:3},{value:"\u7b7e\u540d\u4e0e\u6821\u9a8c",id:"\u7b7e\u540d\u4e0e\u6821\u9a8c",level:3},{value:"Go \u4f2a\u4ee3\u7801\uff1aP2PKH \u6267\u884c\u793a\u610f",id:"go-\u4f2a\u4ee3\u7801p2pkh-\u6267\u884c\u793a\u610f",level:3},{value:"\u5171\u8bc6\u4e0e\u7b56\u7565\uff08Policy\uff09",id:"\u5171\u8bc6\u4e0e\u7b56\u7565policy",level:3}];function h(i){const e={code:"code",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",ul:"ul",...(0,l.R)(),...i.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(e.h2,{id:"\u811a\u672c\u7cfb\u7edf\u6982\u89c8script",children:"\u811a\u672c\u7cfb\u7edf\u6982\u89c8\uff08Script\uff09"}),"\n",(0,s.jsxs)(e.p,{children:["Bitcoin Script \u662f\u57fa\u4e8e\u6808\u7684\u3001\u56fe\u7075\u4e0d\u5b8c\u5907\u7684\u8fde\u63a5\u8bed\u8a00\u3002\u9501\u5b9a\u811a\u672c ",(0,s.jsx)(e.code,{children:"scriptPubKey"})," \u4e0e\u89e3\u9501\u811a\u672c ",(0,s.jsx)(e.code,{children:"scriptSig/witness"})," \u4e32\u63a5\u6267\u884c\uff0c\u6700\u7ec8\u9700\u5f97\u5230 TRUE\u3002"]}),"\n",(0,s.jsx)(e.h3,{id:"\u8bbe\u8ba1\u76ee\u6807",children:"\u8bbe\u8ba1\u76ee\u6807"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"\u5b89\u5168\uff1a\u65e0\u5faa\u73af\uff0c\u9650\u5236\u64cd\u4f5c\u6570\u4e0e\u811a\u672c\u5927\u5c0f\uff0c\u9632 DoS"}),"\n",(0,s.jsx)(e.li,{children:"\u53ef\u7ec4\u5408\uff1a\u901a\u8fc7\u6a21\u677f\u4e0e OP \u8c03\u5ea6\u7ec4\u5408\u6761\u4ef6\uff08\u54c8\u5e0c\u9501\u3001\u65f6\u95f4\u9501\u3001\u591a\u7b7e\u7b49\uff09"}),"\n",(0,s.jsxs)(e.li,{children:["\u5411\u524d\u517c\u5bb9\uff1a\u4e3a\u672a\u6765\u8f6f\u5206\u53c9\u9884\u7559 ",(0,s.jsx)(e.code,{children:"OP_SUCCESSx"})," \u7a7a\u95f4"]}),"\n"]}),"\n",(0,s.jsx)(e.h3,{id:"\u5e38\u89c1\u6a21\u677f",children:"\u5e38\u89c1\u6a21\u677f"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:["P2PKH\uff1a",(0,s.jsx)(e.code,{children:"DUP HASH160 <20B> EQUALVERIFY CHECKSIG"})]}),"\n",(0,s.jsxs)(e.li,{children:["P2SH\uff1a",(0,s.jsx)(e.code,{children:"HASH160 <20B> EQUAL"})]}),"\n",(0,s.jsxs)(e.li,{children:["P2WPKH\uff08v0\uff09\uff1a",(0,s.jsx)(e.code,{children:"0 <20B>"}),"\uff08witness \u643a\u5e26\u7b7e\u540d+\u516c\u94a5\uff09"]}),"\n",(0,s.jsxs)(e.li,{children:["P2WSH\uff08v0\uff09\uff1a",(0,s.jsx)(e.code,{children:"0 <32B>"}),"\uff08witness \u643a\u5e26\u811a\u672c\u4e0e\u6570\u636e\uff09"]}),"\n",(0,s.jsxs)(e.li,{children:["P2TR\uff08v1\uff09\uff1a",(0,s.jsx)(e.code,{children:"OP_1 <32B>"}),"\uff08x-only tweaked key\uff09"]}),"\n"]}),"\n",(0,s.jsx)(e.h3,{id:"\u8d44\u6e90\u4e0e\u9650\u5236",children:"\u8d44\u6e90\u4e0e\u9650\u5236"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"\u975e\u89c1\u8bc1\u811a\u672c\u5927\u5c0f\u3001\u6808\u6df1\u3001\u64cd\u4f5c\u6b21\u6570\u9650\u5236"}),"\n",(0,s.jsx)(e.li,{children:"\u89c1\u8bc1\u811a\u672c\uff08v0\uff09\u72ec\u7acb\u7684\u9650\u5236\u96c6\u5408\uff08\u66f4\u5bbd\u677e\u4e14\u66f4\u5408\u7406\uff09"}),"\n",(0,s.jsx)(e.li,{children:"Tapscript \u5f15\u5165\u65b0\u7684\u8ba1\u8d39\u4e0e\u9650\u5236\u89c4\u5219\uff08\u53bb\u9664 CHECKMULTISIG \u7684\u201c+1 bug\u201d\uff09"}),"\n"]}),"\n",(0,s.jsx)(e.h3,{id:"\u7b7e\u540d\u4e0e\u6821\u9a8c",children:"\u7b7e\u540d\u4e0e\u6821\u9a8c"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"ECDSA\uff08\u5386\u53f2\uff09\uff1a\u4e25\u683c DER \u7f16\u7801\u3001\u4f4e S \u7b56\u7565\u3001RFC6979 \u968f\u673a\u6570"}),"\n",(0,s.jsx)(e.li,{children:"Schnorr\uff08BIP340\uff09\uff1ax-only \u516c\u94a5\u300164B \u7b7e\u540d\u3001\u7ebf\u6027\u53ef\u52a0\u6027\u4fbf\u4e8e\u805a\u5408"}),"\n"]}),"\n",(0,s.jsx)(e.h3,{id:"go-\u4f2a\u4ee3\u7801p2pkh-\u6267\u884c\u793a\u610f",children:"Go \u4f2a\u4ee3\u7801\uff1aP2PKH \u6267\u884c\u793a\u610f"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-go",children:"stack := [][]byte{}\n// scriptSig: <sig> <pubkey>\n// scriptPubKey: DUP HASH160 <20B> EQUALVERIFY CHECKSIG\n\npush(sig); push(pubkey)\ndup(); hash160(); push(pubkeyHash)\nequalverify(); checksig(sig, pubkey)\n\n// \u82e5\u6700\u7ec8\u4e3a TRUE\uff0c\u9a8c\u8bc1\u901a\u8fc7\n"})}),"\n",(0,s.jsx)(e.h3,{id:"\u5171\u8bc6\u4e0e\u7b56\u7565policy",children:"\u5171\u8bc6\u4e0e\u7b56\u7565\uff08Policy\uff09"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"\u5171\u8bc6\uff1a\u811a\u672c\u8bed\u4e49\u4e0e\u9a8c\u8bc1\u89c4\u5219\uff1b\u6240\u6709\u8282\u70b9\u5fc5\u987b\u4e00\u81f4"}),"\n",(0,s.jsx)(e.li,{children:"\u7b56\u7565\uff1a\u4e2d\u7ee7\u4e0e\u6253\u5305\u89c4\u5219\uff08\u5982\u201c\u6807\u51c6\u811a\u672c\u201d\u3001\u201c\u4f4e S \u503c\u201d\u7b49\uff09\uff0c\u4e0d\u540c\u7248\u672c\u53ef\u8c03\u8282\uff0c\u4e0d\u5f71\u54cd\u5df2\u4e0a\u94fe\u4ea4\u6613\u7684\u6709\u6548\u6027"}),"\n"]})]})}function p(i={}){const{wrapper:e}={...(0,l.R)(),...i.components};return e?(0,s.jsx)(e,{...i,children:(0,s.jsx)(h,{...i})}):h(i)}},28453:(i,e,n)=>{n.d(e,{R:()=>r,x:()=>t});var c=n(96540);const s={},l=c.createContext(s);function r(i){const e=c.useContext(l);return c.useMemo((function(){return"function"==typeof i?i(e):{...e,...i}}),[e,i])}function t(i){let e;return e=i.disableParentContext?"function"==typeof i.components?i.components(s):i.components||s:r(i.components),c.createElement(l.Provider,{value:e},i.children)}}}]);
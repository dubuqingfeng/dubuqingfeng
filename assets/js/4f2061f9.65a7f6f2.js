"use strict";(self.webpackChunkdubuqingfeng=self.webpackChunkdubuqingfeng||[]).push([[5563],{28802:(e,r,n)=>{n.r(r),n.d(r,{assets:()=>o,contentTitle:()=>a,default:()=>h,frontMatter:()=>s,metadata:()=>i,toc:()=>l});const i=JSON.parse('{"id":"Wiki/programming/javascript/web/service-worker","title":"service-worker","description":"Service Worker \u6982\u89c8","source":"@site/docs/Wiki/programming/javascript/web/service-worker.md","sourceDirName":"Wiki/programming/javascript/web","slug":"/Wiki/programming/javascript/web/service-worker","permalink":"/docs/Wiki/programming/javascript/web/service-worker","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"rendering-performance","permalink":"/docs/Wiki/programming/javascript/web/rendering-performance"},"next":{"title":"storage","permalink":"/docs/Wiki/programming/javascript/web/storage"}}');var c=n(74848),t=n(28453);const s={},a=void 0,o={},l=[{value:"Service Worker \u6982\u89c8",id:"service-worker-\u6982\u89c8",level:3},{value:"ToC",id:"toc",level:4},{value:"\u751f\u547d\u5468\u671f\u4e0e\u4f5c\u7528\u57df",id:"\u751f\u547d\u5468\u671f\u4e0e\u4f5c\u7528\u57df",level:4},{value:"\u7f13\u5b58\u4e0e\u79bb\u7ebf",id:"\u7f13\u5b58\u4e0e\u79bb\u7ebf",level:4},{value:"\u66f4\u65b0\u7b56\u7565",id:"\u66f4\u65b0\u7b56\u7565",level:4}];function d(e){const r={code:"code",h3:"h3",h4:"h4",li:"li",pre:"pre",ul:"ul",...(0,t.R)(),...e.components};return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(r.h3,{id:"service-worker-\u6982\u89c8",children:"Service Worker \u6982\u89c8"}),"\n",(0,c.jsx)(r.h4,{id:"toc",children:"ToC"}),"\n",(0,c.jsxs)(r.ul,{children:["\n",(0,c.jsx)(r.li,{children:"\u751f\u547d\u5468\u671f\u4e0e\u4f5c\u7528\u57df"}),"\n",(0,c.jsx)(r.li,{children:"\u7f13\u5b58\u4e0e\u79bb\u7ebf"}),"\n",(0,c.jsx)(r.li,{children:"\u66f4\u65b0\u7b56\u7565"}),"\n"]}),"\n",(0,c.jsx)(r.h4,{id:"\u751f\u547d\u5468\u671f\u4e0e\u4f5c\u7528\u57df",children:"\u751f\u547d\u5468\u671f\u4e0e\u4f5c\u7528\u57df"}),"\n",(0,c.jsxs)(r.ul,{children:["\n",(0,c.jsx)(r.li,{children:"\u5b89\u88c5\uff08install\uff09\u2192 \u6fc0\u6d3b\uff08activate\uff09\u2192 \u8fd0\u884c\uff1b\u4f5c\u7528\u57df\u7531\u6ce8\u518c\u8def\u5f84\u51b3\u5b9a\uff1b\u4ec5 HTTPS \u73af\u5883\u3002"}),"\n"]}),"\n",(0,c.jsx)(r.h4,{id:"\u7f13\u5b58\u4e0e\u79bb\u7ebf",children:"\u7f13\u5b58\u4e0e\u79bb\u7ebf"}),"\n",(0,c.jsxs)(r.ul,{children:["\n",(0,c.jsx)(r.li,{children:"\u4f7f\u7528 Cache Storage\uff1a"}),"\n"]}),"\n",(0,c.jsx)(r.pre,{children:(0,c.jsx)(r.code,{className:"language-js",children:"self.addEventListener('fetch', e => {\n  e.respondWith((async () => {\n    const cache = await caches.open('v1')\n    const cached = await cache.match(e.request)\n    if (cached) return cached\n    const res = await fetch(e.request)\n    cache.put(e.request, res.clone())\n    return res\n  })())\n})\n"})}),"\n",(0,c.jsx)(r.h4,{id:"\u66f4\u65b0\u7b56\u7565",children:"\u66f4\u65b0\u7b56\u7565"}),"\n",(0,c.jsxs)(r.ul,{children:["\n",(0,c.jsx)(r.li,{children:"Cache-first / Network-first / Stale-while-revalidate\uff1b"}),"\n",(0,c.jsxs)(r.li,{children:["\u5904\u7406\u597d\u8df3\u7248\u672c\u6fc0\u6d3b\u4e0e\u5ba2\u6237\u7aef\u5237\u65b0\uff08",(0,c.jsx)(r.code,{children:"skipWaiting"}),"/",(0,c.jsx)(r.code,{children:"clients.claim"}),"\uff09\u3002"]}),"\n"]})]})}function h(e={}){const{wrapper:r}={...(0,t.R)(),...e.components};return r?(0,c.jsx)(r,{...e,children:(0,c.jsx)(d,{...e})}):d(e)}},28453:(e,r,n)=>{n.d(r,{R:()=>s,x:()=>a});var i=n(96540);const c={},t=i.createContext(c);function s(e){const r=i.useContext(t);return i.useMemo((function(){return"function"==typeof e?e(r):{...r,...e}}),[r,e])}function a(e){let r;return r=e.disableParentContext?"function"==typeof e.components?e.components(c):e.components||c:s(e.components),i.createElement(t.Provider,{value:r},e.children)}}}]);
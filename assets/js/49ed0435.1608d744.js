"use strict";(self.webpackChunkdubuqingfeng=self.webpackChunkdubuqingfeng||[]).push([[8709],{1211:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>d,contentTitle:()=>o,default:()=>p,frontMatter:()=>a,metadata:()=>t,toc:()=>c});const t=JSON.parse('{"id":"Wiki/programming/php/database/database","title":"database","description":"\u6570\u636e\u5e93\u8bbf\u95ee\u4e0e ORM \u6982\u89c8","source":"@site/docs/Wiki/programming/php/database/database.md","sourceDirName":"Wiki/programming/php/database","slug":"/Wiki/programming/php/database/","permalink":"/docs/Wiki/programming/php/database/","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"concurrency","permalink":"/docs/Wiki/programming/php/concurrency/"},"next":{"title":"laravel","permalink":"/docs/Wiki/programming/php/framework/laravel"}}');var i=r(74848),s=r(28453);const a={},o=void 0,d={},c=[{value:"\u6570\u636e\u5e93\u8bbf\u95ee\u4e0e ORM \u6982\u89c8",id:"\u6570\u636e\u5e93\u8bbf\u95ee\u4e0e-orm-\u6982\u89c8",level:3},{value:"PDO \u4e0e\u9884\u5904\u7406",id:"pdo-\u4e0e\u9884\u5904\u7406",level:4},{value:"\u4e8b\u52a1",id:"\u4e8b\u52a1",level:4},{value:"\u8fc1\u79fb\u4e0e Seeder",id:"\u8fc1\u79fb\u4e0e-seeder",level:4}];function l(e){const n={code:"code",h3:"h3",h4:"h4",li:"li",p:"p",pre:"pre",ul:"ul",...(0,s.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.h3,{id:"\u6570\u636e\u5e93\u8bbf\u95ee\u4e0e-orm-\u6982\u89c8",children:"\u6570\u636e\u5e93\u8bbf\u95ee\u4e0e ORM \u6982\u89c8"}),"\n",(0,i.jsx)(n.p,{children:"PDO\u3001mysqli\u3001\u5e38\u89c1 ORM\uff08Eloquent/Doctrine\uff09\u4e0e\u67e5\u8be2\u6784\u5efa\u5668\u3001\u8fde\u63a5\u6c60\u4e0e\u8fc1\u79fb\u3002"}),"\n",(0,i.jsx)(n.h4,{id:"pdo-\u4e0e\u9884\u5904\u7406",children:"PDO \u4e0e\u9884\u5904\u7406"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-php",children:"$pdo = new PDO('mysql:host=127.0.0.1;dbname=app;charset=utf8mb4', 'user', 'pass', [\n  PDO::ATTR_ERRMODE => PDO::ERRMODE_EXCEPTION,\n]);\n$stmt = $pdo->prepare('SELECT * FROM users WHERE id = :id');\n$stmt->execute(['id' => 1]);\n$user = $stmt->fetch(PDO::FETCH_ASSOC);\n"})}),"\n",(0,i.jsxs)(n.p,{children:["\u9632\u6ce8\u5165\uff1a\u603b\u662f\u4f7f\u7528\u9884\u5904\u7406\uff1b\u7981\u7528\u9b54\u672f\u8f6c\u4e49\uff1b\u5bf9 LIKE \u6a21\u5f0f\u8f6c\u4e49 ",(0,i.jsx)(n.code,{children:"%/_"}),"\u3002"]}),"\n",(0,i.jsx)(n.h4,{id:"\u4e8b\u52a1",children:"\u4e8b\u52a1"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-php",children:"$pdo->beginTransaction();\ntry {\n  // ...\n  $pdo->commit();\n} catch (Throwable $e) {\n  $pdo->rollBack();\n  throw $e;\n}\n"})}),"\n",(0,i.jsx)(n.h4,{id:"\u8fc1\u79fb\u4e0e-seeder",children:"\u8fc1\u79fb\u4e0e Seeder"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Laravel\uff1a",(0,i.jsx)(n.code,{children:"php artisan migrate"}),"\u3001",(0,i.jsx)(n.code,{children:"db:seed"}),"\uff1b"]}),"\n",(0,i.jsx)(n.li,{children:"Doctrine Migrations\uff1a\u7248\u672c\u5316 SQL/DDL\uff1b"}),"\n",(0,i.jsx)(n.li,{children:"\u6d4b\u8bd5\u5939\u5177\uff1a\u6784\u9020\u6700\u5c0f\u6570\u636e\uff0c\u4f7f\u7528\u4e8b\u52a1\u56de\u6eda\u6216\u91cd\u7f6e\u6570\u636e\u5e93\u3002"}),"\n"]})]})}function p(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(l,{...e})}):l(e)}},28453:(e,n,r)=>{r.d(n,{R:()=>a,x:()=>o});var t=r(96540);const i={},s=t.createContext(i);function a(e){const n=t.useContext(s);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:a(e.components),t.createElement(s.Provider,{value:n},e.children)}}}]);
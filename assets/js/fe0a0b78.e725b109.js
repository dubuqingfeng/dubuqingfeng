"use strict";(globalThis.webpackChunkdubuqingfeng=globalThis.webpackChunkdubuqingfeng||[]).push([[45486],{28453:(e,n,r)=>{r.d(n,{R:()=>s,x:()=>c});var t=r(96540);const i={},o=t.createContext(i);function s(e){const n=t.useContext(o);return t.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:s(e.components),t.createElement(o.Provider,{value:n},e.children)}},68073:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>p,contentTitle:()=>c,default:()=>d,frontMatter:()=>s,metadata:()=>t,toc:()=>a});const t=JSON.parse('{"id":"Wiki/programming/cpp/memory/smart-pointer","title":"smart-pointer","description":"\u667a\u80fd\u6307\u9488","source":"@site/docs/Wiki/programming/cpp/memory/smart-pointer.md","sourceDirName":"Wiki/programming/cpp/memory","slug":"/Wiki/programming/cpp/memory/smart-pointer","permalink":"/docs/Wiki/programming/cpp/memory/smart-pointer","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"move-semantics","permalink":"/docs/Wiki/programming/cpp/memory/move-semantics"},"next":{"title":"asio","permalink":"/docs/Wiki/programming/cpp/network/asio"}}');var i=r(74848),o=r(28453);const s={},c=void 0,p={},a=[{value:"\u667a\u80fd\u6307\u9488",id:"\u667a\u80fd\u6307\u9488",level:3}];function m(e){const n={code:"code",h3:"h3",li:"li",p:"p",pre:"pre",ul:"ul",...(0,o.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.h3,{id:"\u667a\u80fd\u6307\u9488",children:"\u667a\u80fd\u6307\u9488"}),"\n",(0,i.jsx)(n.p,{children:"\u5e38\u7528\u7c7b\u578b\uff1a"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"std::unique_ptr<T>"})," \u72ec\u5360\u6240\u6709\u6743\uff0c\u53ef\u79fb\u52a8\u4e0d\u53ef\u62f7\u8d1d\uff1b\u9ed8\u8ba4\u9009\u62e9\u3002"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"std::shared_ptr<T>"})," \u5171\u4eab\u6240\u6709\u6743\uff0c\u5f15\u7528\u8ba1\u6570\u6709\u5f00\u9500\uff1b\u907f\u514d\u5faa\u73af\u5f15\u7528\uff0c\u5fc5\u8981\u65f6\u914d\u5408 ",(0,i.jsx)(n.code,{children:"std::weak_ptr"}),"\u3002"]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"\u793a\u4f8b\uff1a"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-cpp",children:"#include <memory>\n#include <vector>\n\nstruct Foo { int x{0}; };\n\nint main() {\n  auto p = std::make_unique<Foo>();\n  p->x = 42;\n\n  std::shared_ptr<Foo> sp = std::move(p); // unique_ptr \u79fb\u4ea4\u6240\u6709\u6743\n  // if (p) ... // p \u73b0\u4e3a\u7a7a\n\n  std::vector<std::shared_ptr<Foo>> v;\n  v.push_back(sp);\n}\n"})})]})}function d(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(m,{...e})}):m(e)}}}]);
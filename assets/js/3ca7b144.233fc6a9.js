"use strict";(self.webpackChunkdubuqingfeng=self.webpackChunkdubuqingfeng||[]).push([[8514],{110:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>c,contentTitle:()=>t,default:()=>x,frontMatter:()=>r,metadata:()=>s,toc:()=>a});const s=JSON.parse('{"id":"Wiki/programming/database/mysql/index-design","title":"\u7d22\u5f15\u8bbe\u8ba1\u4e0e\u6700\u4f73\u5b9e\u8df5","description":"\u5982\u4f55\u8bbe\u8ba1\u9ad8\u9009\u62e9\u6027\u3001\u53ef\u8986\u76d6\u7684\u7d22\u5f15\uff0c\u5e76\u907f\u514d\u5e38\u89c1\u8bef\u533a\u3002","source":"@site/docs/Wiki/programming/database/mysql/index-design.md","sourceDirName":"Wiki/programming/database/mysql","slug":"/Wiki/programming/database/mysql/index-design","permalink":"/docs/Wiki/programming/database/mysql/index-design","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"title":"\u7d22\u5f15\u8bbe\u8ba1\u4e0e\u6700\u4f73\u5b9e\u8df5"},"sidebar":"tutorialSidebar","previous":{"title":"EXPLAIN \u4e0e\u67e5\u8be2\u4f18\u5316","permalink":"/docs/Wiki/programming/database/mysql/explain-optimization"},"next":{"title":"\u9501\u7c7b\u578b\u4e0e\u5e76\u53d1\u63a7\u5236","permalink":"/docs/Wiki/programming/database/mysql/locks"}}');var d=i(74848),l=i(28453);const r={title:"\u7d22\u5f15\u8bbe\u8ba1\u4e0e\u6700\u4f73\u5b9e\u8df5"},t=void 0,c={},a=[{value:"\u8054\u5408\u7d22\u5f15\u4e0e\u6700\u5de6\u524d\u7f00",id:"\u8054\u5408\u7d22\u5f15\u4e0e\u6700\u5de6\u524d\u7f00",level:2},{value:"\u8986\u76d6\u7d22\u5f15",id:"\u8986\u76d6\u7d22\u5f15",level:2},{value:"\u524d\u7f00\u7d22\u5f15",id:"\u524d\u7f00\u7d22\u5f15",level:2},{value:"\u6392\u5e8f\u4e0e\u5206\u9875\uff08Seek \u6cd5\uff09",id:"\u6392\u5e8f\u4e0e\u5206\u9875seek-\u6cd5",level:2},{value:"\u5e38\u89c1\u53cd\u6a21\u5f0f",id:"\u5e38\u89c1\u53cd\u6a21\u5f0f",level:2}];function o(e){const n={code:"code",h2:"h2",li:"li",p:"p",pre:"pre",ul:"ul",...(0,l.R)(),...e.components};return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(n.p,{children:"\u5982\u4f55\u8bbe\u8ba1\u9ad8\u9009\u62e9\u6027\u3001\u53ef\u8986\u76d6\u7684\u7d22\u5f15\uff0c\u5e76\u907f\u514d\u5e38\u89c1\u8bef\u533a\u3002"}),"\n",(0,d.jsx)(n.h2,{id:"\u8054\u5408\u7d22\u5f15\u4e0e\u6700\u5de6\u524d\u7f00",children:"\u8054\u5408\u7d22\u5f15\u4e0e\u6700\u5de6\u524d\u7f00"}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.code,{children:"idx(a,b,c)"})," \u8986\u76d6 ",(0,d.jsx)(n.code,{children:"(a)"}),"\u3001",(0,d.jsx)(n.code,{children:"(a,b)"}),"\u3001",(0,d.jsx)(n.code,{children:"(a,b,c)"})," \u4e09\u79cd\u524d\u7f00\uff1b",(0,d.jsx)(n.code,{children:"WHERE b=?"})," \u4e0d\u80fd\u72ec\u7acb\u547d\u4e2d\u3002"]}),"\n",(0,d.jsx)(n.li,{children:"\u8c13\u8bcd\u987a\u5e8f\u4e0d\u5f71\u54cd\u547d\u4e2d\uff0c\u4f46\u201c\u7b49\u503c\u4f18\u5148\uff0c\u8303\u56f4\u9760\u540e\u201d\u3002"}),"\n"]}),"\n",(0,d.jsx)(n.h2,{id:"\u8986\u76d6\u7d22\u5f15",children:"\u8986\u76d6\u7d22\u5f15"}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsxs)(n.li,{children:["\u67e5\u8be2\u53ea\u8bbf\u95ee\u4e8c\u7ea7\u7d22\u5f15\u5373\u53ef\u8fd4\u56de\u5217\uff0c\u907f\u514d\u56de\u8868\uff1b",(0,d.jsx)(n.code,{children:"EXPLAIN Extra=Using index"}),"\u3002"]}),"\n",(0,d.jsxs)(n.li,{children:["\u5178\u578b\uff1a\u5206\u9875\u5217\u8868\u53ea\u8fd4\u56de ",(0,d.jsx)(n.code,{children:"id, created_at"}),"\uff0c\u4f7f\u7528 ",(0,d.jsx)(n.code,{children:"(created_at, id)"})," \u8054\u5408\u7d22\u5f15\u3002"]}),"\n"]}),"\n",(0,d.jsx)(n.h2,{id:"\u524d\u7f00\u7d22\u5f15",children:"\u524d\u7f00\u7d22\u5f15"}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsxs)(n.li,{children:["\u5bf9\u957f\u5b57\u7b26\u4e32\u4f7f\u7528\u524d\u7f00\u7d22\u5f15\u8282\u7701\u7a7a\u95f4\uff1a",(0,d.jsx)(n.code,{children:"INDEX idx_email (email(12))"}),"\u3002"]}),"\n",(0,d.jsx)(n.li,{children:"\u6ce8\u610f\u9009\u62e9\u6027\u8bc4\u4f30\uff0c\u8fc7\u77ed\u5f71\u54cd\u8fc7\u6ee4\u80fd\u529b\u3002"}),"\n"]}),"\n",(0,d.jsx)(n.h2,{id:"\u6392\u5e8f\u4e0e\u5206\u9875seek-\u6cd5",children:"\u6392\u5e8f\u4e0e\u5206\u9875\uff08Seek \u6cd5\uff09"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-sql",children:"-- \u6df1\u5206\u9875\u907f\u514d OFFSET N \u7684\u56de\u6536\u6210\u672c\nSELECT id, created_at FROM t\nWHERE created_at < ? OR (created_at = ? AND id < ?)\nORDER BY created_at DESC, id DESC\nLIMIT 20;\n"})}),"\n",(0,d.jsx)(n.h2,{id:"\u5e38\u89c1\u53cd\u6a21\u5f0f",children:"\u5e38\u89c1\u53cd\u6a21\u5f0f"}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsxs)(n.li,{children:["\u51fd\u6570/\u9690\u5f0f\u8f6c\u6362\u7834\u574f\u7d22\u5f15\uff1a",(0,d.jsx)(n.code,{children:"WHERE DATE(ts)=..."}),"\uff1b\u6539\u4e3a\u8303\u56f4 ",(0,d.jsx)(n.code,{children:"ts >= ? AND ts < ?"}),"\u3002"]}),"\n",(0,d.jsxs)(n.li,{children:["\u524d\u5bfc\u901a\u914d\uff1a",(0,d.jsx)(n.code,{children:"LIKE '%xxx'"})," \u65e0\u6cd5\u5229\u7528 B+ \u6811\uff1b\u8003\u8651\u5012\u6392\u3001ES \u6216 ngram \u8f85\u52a9\u3002"]}),"\n",(0,d.jsx)(n.li,{children:"\u4f4e\u9009\u62e9\u6027\u5217\u5355\u72ec\u5efa\u7d22\u5f15\uff08\u5982\u6027\u522b\uff09\uff0c\u610f\u4e49\u4e0d\u5927\u3002"}),"\n"]})]})}function x(e={}){const{wrapper:n}={...(0,l.R)(),...e.components};return n?(0,d.jsx)(n,{...e,children:(0,d.jsx)(o,{...e})}):o(e)}},28453:(e,n,i)=>{i.d(n,{R:()=>r,x:()=>t});var s=i(96540);const d={},l=s.createContext(d);function r(e){const n=s.useContext(l);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function t(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(d):e.components||d:r(e.components),s.createElement(l.Provider,{value:n},e.children)}}}]);
"use strict";(self.webpackChunkdubuqingfeng=self.webpackChunkdubuqingfeng||[]).push([[2102],{54488:(r,e,n)=>{n.r(e),n.d(e,{assets:()=>a,contentTitle:()=>l,default:()=>c,frontMatter:()=>s,metadata:()=>t,toc:()=>d});const t=JSON.parse('{"id":"Wiki/programming/rust/error/error-handling","title":"error-handling","description":"\u9519\u8bef\u5904\u7406\uff1aResult/anyhow/thiserror","source":"@site/docs/Wiki/programming/rust/error/error-handling.md","sourceDirName":"Wiki/programming/rust/error","slug":"/Wiki/programming/rust/error/error-handling","permalink":"/docs/Wiki/programming/rust/error/error-handling","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"threading","permalink":"/docs/Wiki/programming/rust/concurrency/threading"},"next":{"title":"c-ffi","permalink":"/docs/Wiki/programming/rust/ffi/c-ffi"}}');var i=n(74848),o=n(28453);const s={},l=void 0,a={},d=[{value:"\u9519\u8bef\u5904\u7406\uff1aResult/anyhow/thiserror",id:"\u9519\u8bef\u5904\u7406resultanyhowthiserror",level:3},{value:"\u57fa\u7840\uff1aResult \u4e0e ? \u8fd0\u7b97\u7b26",id:"\u57fa\u7840result-\u4e0e--\u8fd0\u7b97\u7b26",level:4},{value:"thiserror \u5b9a\u4e49\u9519\u8bef\u7c7b\u578b",id:"thiserror-\u5b9a\u4e49\u9519\u8bef\u7c7b\u578b",level:4},{value:"anyhow \u7b80\u5316\u5e94\u7528\u5c42\u9519\u8bef",id:"anyhow-\u7b80\u5316\u5e94\u7528\u5c42\u9519\u8bef",level:4},{value:"\u4e0e Go \u5bf9\u7167",id:"\u4e0e-go-\u5bf9\u7167",level:4}];function u(r){const e={code:"code",h3:"h3",h4:"h4",li:"li",pre:"pre",ul:"ul",...(0,o.R)(),...r.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(e.h3,{id:"\u9519\u8bef\u5904\u7406resultanyhowthiserror",children:"\u9519\u8bef\u5904\u7406\uff1aResult/anyhow/thiserror"}),"\n",(0,i.jsx)(e.h4,{id:"\u57fa\u7840result-\u4e0e--\u8fd0\u7b97\u7b26",children:"\u57fa\u7840\uff1aResult \u4e0e ? \u8fd0\u7b97\u7b26"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-rust",children:"use std::fs;\n\nfn read_text(p: &str) -> std::io::Result<String> {\n    let s = fs::read_to_string(p)?; // \u51fa\u9519\u81ea\u52a8\u5411\u4e0a\u4f20\u64ad\n    Ok(s)\n}\n"})}),"\n",(0,i.jsx)(e.h4,{id:"thiserror-\u5b9a\u4e49\u9519\u8bef\u7c7b\u578b",children:"thiserror \u5b9a\u4e49\u9519\u8bef\u7c7b\u578b"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-rust",children:'use thiserror::Error;\n\n#[derive(Debug, Error)]\nenum MyError {\n    #[error("io: {0}")] Io(#[from] std::io::Error),\n    #[error("bad input: {0}")] BadInput(String),\n}\n\nfn run() -> Result<(), MyError> {\n    // ...\n    Ok(())\n}\n'})}),"\n",(0,i.jsx)(e.h4,{id:"anyhow-\u7b80\u5316\u5e94\u7528\u5c42\u9519\u8bef",children:"anyhow \u7b80\u5316\u5e94\u7528\u5c42\u9519\u8bef"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-rust",children:'use anyhow::{Context, Result};\n\nfn main() -> Result<()> {\n    let data = std::fs::read("conf.toml").context("read conf failed")?;\n    println!("{} bytes", data.len());\n    Ok(())\n}\n'})}),"\n",(0,i.jsx)(e.h4,{id:"\u4e0e-go-\u5bf9\u7167",children:"\u4e0e Go \u5bf9\u7167"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["Rust \u901a\u8fc7\u7c7b\u578b\u7cfb\u7edf\u7f16\u8bd1\u671f\u7ea6\u675f\u9519\u8bef\u5904\u7406\u8def\u5f84\uff1bGo \u901a\u8fc7\u663e\u5f0f\u8fd4\u56de ",(0,i.jsx)(e.code,{children:"error"}),"\uff0c\u5e38\u914d\u5408 ",(0,i.jsx)(e.code,{children:"if err != nil"}),"\u3002"]}),"\n"]})]})}function c(r={}){const{wrapper:e}={...(0,o.R)(),...r.components};return e?(0,i.jsx)(e,{...r,children:(0,i.jsx)(u,{...r})}):u(r)}},28453:(r,e,n)=>{n.d(e,{R:()=>s,x:()=>l});var t=n(96540);const i={},o=t.createContext(i);function s(r){const e=t.useContext(o);return t.useMemo((function(){return"function"==typeof r?r(e):{...e,...r}}),[e,r])}function l(r){let e;return e=r.disableParentContext?"function"==typeof r.components?r.components(i):r.components||i:s(r.components),t.createElement(o.Provider,{value:e},r.children)}}}]);
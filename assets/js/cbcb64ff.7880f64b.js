"use strict";(self.webpackChunkdubuqingfeng=self.webpackChunkdubuqingfeng||[]).push([[1729],{19660:(n,e,i)=>{i.r(e),i.d(e,{assets:()=>c,contentTitle:()=>o,default:()=>u,frontMatter:()=>l,metadata:()=>s,toc:()=>d});const s=JSON.parse('{"id":"Wiki/programming/sql/transactions/locks","title":"locks","description":"\u9501\u4e0e\u5e76\u53d1\u63a7\u5236","source":"@site/docs/Wiki/programming/sql/transactions/locks.md","sourceDirName":"Wiki/programming/sql/transactions","slug":"/Wiki/programming/sql/transactions/locks","permalink":"/docs/Wiki/programming/sql/transactions/locks","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"isolation","permalink":"/docs/Wiki/programming/sql/transactions/isolation"},"next":{"title":"TypeScript","permalink":"/docs/wiki/programming/typescript"}}');var r=i(74848),t=i(28453);const l={},o=void 0,c={},d=[{value:"\u9501\u4e0e\u5e76\u53d1\u63a7\u5236",id:"\u9501\u4e0e\u5e76\u53d1\u63a7\u5236",level:3},{value:"\u8981\u70b9",id:"\u8981\u70b9",level:4},{value:"\u901a\u8fc7\u6267\u884c\u8ba1\u5212\u63a8\u65ad\u52a0\u9501",id:"\u901a\u8fc7\u6267\u884c\u8ba1\u5212\u63a8\u65ad\u52a0\u9501",level:4},{value:"\u4e50\u89c2 vs \u60b2\u89c2",id:"\u4e50\u89c2-vs-\u60b2\u89c2",level:4}];function a(n){const e={code:"code",h3:"h3",h4:"h4",li:"li",p:"p",ul:"ul",...(0,t.R)(),...n.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(e.h3,{id:"\u9501\u4e0e\u5e76\u53d1\u63a7\u5236",children:"\u9501\u4e0e\u5e76\u53d1\u63a7\u5236"}),"\n",(0,r.jsx)(e.p,{children:"\u884c\u9501/\u8868\u9501/\u610f\u5411\u9501\u3001\u6b7b\u9501\u4e0e\u8bca\u65ad\uff0c\u907f\u514d\u5927\u8303\u56f4\u9501\u4e0e\u70ed\u70b9\u4e89\u7528\u3002"}),"\n",(0,r.jsx)(e.h4,{id:"\u8981\u70b9",children:"\u8981\u70b9"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"\u9501\u7c92\u5ea6\uff1a\u8868/\u884c/\u9875\uff0c\u610f\u5411\u9501\u7684\u4f5c\u7528\uff1b"}),"\n",(0,r.jsx)(e.li,{children:"\u8303\u56f4\u6761\u4ef6\u4e0e\u95f4\u9699\u9501\uff08\u90e8\u5206\u5f15\u64ce\uff0c\u5982 InnoDB\uff09\uff1b"}),"\n",(0,r.jsx)(e.li,{children:"\u6b7b\u9501\uff1a\u68c0\u6d4b/\u56de\u6eda\u7b56\u7565\u4e0e\u5e38\u89c1\u8bf1\u56e0\uff1b"}),"\n",(0,r.jsx)(e.li,{children:"\u8bfb\u5199\u51b2\u7a81\u7684\u524a\u5cf0\u4e0e\u62c6\u6279\u3002"}),"\n"]}),"\n",(0,r.jsx)(e.h4,{id:"\u901a\u8fc7\u6267\u884c\u8ba1\u5212\u63a8\u65ad\u52a0\u9501",children:"\u901a\u8fc7\u6267\u884c\u8ba1\u5212\u63a8\u65ad\u52a0\u9501"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"\u8303\u56f4\u6761\u4ef6\u4f7f\u7528\u7d22\u5f15\u65f6\uff0c\u9501\u8303\u56f4\u53d7\u7d22\u5f15\u8bb0\u5f55\u4e0e\u95f4\u9699\u5f71\u54cd\uff1b\u5168\u8868\u626b\u63cf\u4f1a\u9501\u66f4\u591a\u8bb0\u5f55\uff1b"}),"\n",(0,r.jsxs)(e.li,{children:["\u4f7f\u7528 ",(0,r.jsx)(e.code,{children:"EXPLAIN"})," \u786e\u8ba4\u662f\u5426\u547d\u4e2d\u5408\u9002\u7d22\u5f15\uff0c\u51cf\u5c11\u4e0d\u5fc5\u8981\u7684\u8303\u56f4\u9501\u3002"]}),"\n"]}),"\n",(0,r.jsx)(e.h4,{id:"\u4e50\u89c2-vs-\u60b2\u89c2",children:"\u4e50\u89c2 vs \u60b2\u89c2"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:["\u4e50\u89c2\u9501\uff1a\u7248\u672c\u53f7\u5217 ",(0,r.jsx)(e.code,{children:"version"}),"\uff0c\u66f4\u65b0\u65f6 ",(0,r.jsx)(e.code,{children:"WHERE id = ? AND version = ?"}),"\uff1b\u51b2\u7a81\u65f6\u91cd\u8bd5\uff1b"]}),"\n",(0,r.jsxs)(e.li,{children:["\u60b2\u89c2\u9501\uff1a",(0,r.jsx)(e.code,{children:"SELECT ... FOR UPDATE"})," \u660e\u786e\u52a0\u9501\uff0c\u51b2\u7a81\u7b49\u5f85/\u8d85\u65f6\uff1b\u9ad8\u5e76\u53d1\u4e0b\u6613\u6269\u5927\u9501\u7ade\u4e89\u3002"]}),"\n"]})]})}function u(n={}){const{wrapper:e}={...(0,t.R)(),...n.components};return e?(0,r.jsx)(e,{...n,children:(0,r.jsx)(a,{...n})}):a(n)}},28453:(n,e,i)=>{i.d(e,{R:()=>l,x:()=>o});var s=i(96540);const r={},t=s.createContext(r);function l(n){const e=s.useContext(t);return s.useMemo((function(){return"function"==typeof n?n(e):{...e,...n}}),[e,n])}function o(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(r):n.components||r:l(n.components),s.createElement(t.Provider,{value:e},n.children)}}}]);
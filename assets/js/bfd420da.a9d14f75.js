"use strict";(self.webpackChunkdubuqingfeng=self.webpackChunkdubuqingfeng||[]).push([[5284],{60108:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>t,contentTitle:()=>c,default:()=>x,frontMatter:()=>d,metadata:()=>s,toc:()=>o});const s=JSON.parse('{"id":"Wiki/programming/database/mysql/explain-optimization","title":"EXPLAIN \u4e0e\u67e5\u8be2\u4f18\u5316","description":"\u89e3\u6790 EXPLAIN \u8f93\u51fa\u3001\u5e38\u89c1\u8bbf\u95ee\u7c7b\u578b\u4e0e\u4f18\u5316\u65b9\u5411\u3002","source":"@site/docs/Wiki/programming/database/mysql/explain-optimization.md","sourceDirName":"Wiki/programming/database/mysql","slug":"/Wiki/programming/database/mysql/explain-optimization","permalink":"/docs/Wiki/programming/database/mysql/explain-optimization","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"title":"EXPLAIN \u4e0e\u67e5\u8be2\u4f18\u5316"},"sidebar":"tutorialSidebar","previous":{"title":"\u6b7b\u9501\u590d\u73b0\u4e0e\u8bca\u65ad","permalink":"/docs/Wiki/programming/database/mysql/deadlock-case-study"},"next":{"title":"\u7d22\u5f15\u8bbe\u8ba1\u4e0e\u6700\u4f73\u5b9e\u8df5","permalink":"/docs/Wiki/programming/database/mysql/index-design"}}');var l=i(74848),r=i(28453);const d={title:"EXPLAIN \u4e0e\u67e5\u8be2\u4f18\u5316"},c=void 0,t={},o=[{value:"EXPLAIN \u5173\u952e\u5217",id:"explain-\u5173\u952e\u5217",level:2},{value:"\u8986\u76d6\u7d22\u5f15\u4e0e\u56de\u8868",id:"\u8986\u76d6\u7d22\u5f15\u4e0e\u56de\u8868",level:2},{value:"\u4f8b\u5b50",id:"\u4f8b\u5b50",level:2},{value:"Join \u7b56\u7565",id:"join-\u7b56\u7565",level:2},{value:"\u5e38\u89c1\u4f18\u5316\u70b9",id:"\u5e38\u89c1\u4f18\u5316\u70b9",level:2}];function a(e){const n={code:"code",h2:"h2",li:"li",p:"p",pre:"pre",ul:"ul",...(0,r.R)(),...e.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(n.p,{children:"\u89e3\u6790 EXPLAIN \u8f93\u51fa\u3001\u5e38\u89c1\u8bbf\u95ee\u7c7b\u578b\u4e0e\u4f18\u5316\u65b9\u5411\u3002"}),"\n",(0,l.jsx)(n.h2,{id:"explain-\u5173\u952e\u5217",children:"EXPLAIN \u5173\u952e\u5217"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"id"}),"\uff1a\u6267\u884c\u987a\u5e8f/\u5b50\u67e5\u8be2\u5c42\u6b21\u3002"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"select_type"}),"\uff1a\u7b80\u5355\u3001\u5b50\u67e5\u8be2\u3001\u6d3e\u751f\u3001UNION \u7b49\u3002"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"type"}),"\uff1a\u8bbf\u95ee\u7c7b\u578b\uff1a",(0,l.jsx)(n.code,{children:"system"})," > ",(0,l.jsx)(n.code,{children:"const"})," > ",(0,l.jsx)(n.code,{children:"eq_ref"})," > ",(0,l.jsx)(n.code,{children:"ref"})," > ",(0,l.jsx)(n.code,{children:"range"})," > ",(0,l.jsx)(n.code,{children:"index"})," > ",(0,l.jsx)(n.code,{children:"ALL"}),"\u3002"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"possible_keys"}),"/",(0,l.jsx)(n.code,{children:"key"}),"/",(0,l.jsx)(n.code,{children:"key_len"}),"\uff1a\u5019\u9009/\u5b9e\u9645\u4f7f\u7528\u7d22\u5f15/\u957f\u5ea6\u3002"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"ref"}),"\uff1a\u7d22\u5f15\u5217\u4e0e\u5e38\u91cf\u6216\u5217\u7684\u6bd4\u8f83\u5173\u7cfb\u3002"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"rows"}),"/",(0,l.jsx)(n.code,{children:"filtered"}),"\uff1a\u4f30\u7b97\u626b\u63cf\u884c\u6570/\u8fc7\u6ee4\u6bd4\u4f8b\u3002"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"Extra"}),"\uff1a",(0,l.jsx)(n.code,{children:"Using index"}),"\uff08\u8986\u76d6\u7d22\u5f15\uff09\u3001",(0,l.jsx)(n.code,{children:"Using where"}),"\u3001",(0,l.jsx)(n.code,{children:"Using filesort"}),"\u3001",(0,l.jsx)(n.code,{children:"Using temporary"})," \u7b49\u3002"]}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"\u8986\u76d6\u7d22\u5f15\u4e0e\u56de\u8868",children:"\u8986\u76d6\u7d22\u5f15\u4e0e\u56de\u8868"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"\u8986\u76d6\u7d22\u5f15\u53ef\u907f\u514d\u56de\u8868\uff0c\u51cf\u5c11\u968f\u673a I/O\u3002"}),"\n",(0,l.jsx)(n.li,{children:"\u9009\u62e9\u6027\u5dee\u7684\u5217\uff08\u5982\u6027\u522b\u3001\u5e03\u5c14\uff09\u4e0d\u9002\u5408\u4f5c\u4e3a\u5355\u5217\u7d22\u5f15\uff1b\u53ef\u4f5c\u4e3a\u8054\u5408\u7d22\u5f15\u7684\u540e\u7f00\u5217\u3002"}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"\u4f8b\u5b50",children:"\u4f8b\u5b50"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-sql",children:"-- \u8868\uff1ausers(id PK, email UNIQUE, created_at, name)\nEXPLAIN SELECT id, email FROM users WHERE email = 'a@b.com';\n-- \u671f\u671b\uff1atype=const/eq_ref\uff0cExtra=Using index\uff08\u8986\u76d6\u7d22\u5f15\uff09\n\nEXPLAIN SELECT * FROM users WHERE created_at BETWEEN '2024-01-01' AND '2024-02-01' ORDER BY created_at DESC LIMIT 20;\n-- \u671f\u671b\uff1atype=range\uff0c\u5408\u9002\u7684\u65f6\u95f4\u7d22\u5f15\uff1b\u907f\u514d Using filesort\n"})}),"\n",(0,l.jsx)(n.h2,{id:"join-\u7b56\u7565",children:"Join \u7b56\u7565"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"\u5c0f\u8868\u9a71\u52a8\u5927\u8868\uff0c\u786e\u4fdd\u9a71\u52a8\u8868\u8fc7\u6ee4\u6027\u5f3a\u4e14\u6709\u5408\u9002\u7d22\u5f15\u3002"}),"\n",(0,l.jsx)(n.li,{children:"\u8fde\u63a5\u6761\u4ef6\u5217\u9700\u8981\u7d22\u5f15\uff1b\u907f\u514d\u51fd\u6570/\u9690\u5f0f\u8f6c\u6362\u7834\u574f\u7d22\u5f15\u4f7f\u7528\u3002"}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"\u5e38\u89c1\u4f18\u5316\u70b9",children:"\u5e38\u89c1\u4f18\u5316\u70b9"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["\u7edf\u8ba1\u4fe1\u606f\u8fc7\u65e7\u5bfc\u81f4\u4f30\u7b97\u5931\u771f\uff1a\u8003\u8651 ",(0,l.jsx)(n.code,{children:"ANALYZE TABLE"})," \u6216\u542f\u7528\u76f4\u65b9\u56fe\u3002"]}),"\n",(0,l.jsxs)(n.li,{children:["\u907f\u514d ",(0,l.jsx)(n.code,{children:"SELECT *"}),"\uff0c\u51cf\u5c11\u56de\u8868\u4e0e\u7f51\u7edc\u4f20\u8f93\u3002"]}),"\n",(0,l.jsx)(n.li,{children:"\u5408\u7406\u5206\u9875\uff1a\u6df1\u5206\u9875\u4f7f\u7528\u5ef6\u8fdf\u5173\u8054\u6216\u57fa\u4e8e\u4e3b\u952e\u7684\u6e38\u6807\u5206\u9875\u3002"}),"\n"]})]})}function x(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,l.jsx)(n,{...e,children:(0,l.jsx)(a,{...e})}):a(e)}},28453:(e,n,i)=>{i.d(n,{R:()=>d,x:()=>c});var s=i(96540);const l={},r=s.createContext(l);function d(e){const n=s.useContext(r);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(l):e.components||l:d(e.components),s.createElement(r.Provider,{value:n},e.children)}}}]);
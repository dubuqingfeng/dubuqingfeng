"use strict";(globalThis.webpackChunkdubuqingfeng=globalThis.webpackChunkdubuqingfeng||[]).push([[5583],{28453:(e,n,i)=>{i.d(n,{R:()=>r,x:()=>d});var l=i(96540);const c={},s=l.createContext(c);function r(e){const n=l.useContext(s);return l.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(c):e.components||c:r(e.components),l.createElement(s.Provider,{value:n},e.children)}},46467:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>o,contentTitle:()=>d,default:()=>a,frontMatter:()=>r,metadata:()=>l,toc:()=>t});const l=JSON.parse('{"id":"Wiki/blockchain/ethereum/gas/opcode-costs","title":"opcode-costs","description":"Opcode \u6210\u672c\u901f\u67e5\u4e0e\u5185\u5b58\u6269\u5c55","source":"@site/docs/Wiki/blockchain/ethereum/gas/opcode-costs.md","sourceDirName":"Wiki/blockchain/ethereum/gas","slug":"/Wiki/blockchain/ethereum/gas/opcode-costs","permalink":"/docs/Wiki/blockchain/ethereum/gas/opcode-costs","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"gas","permalink":"/docs/Wiki/blockchain/ethereum/gas/"},"next":{"title":"devp2p","permalink":"/docs/Wiki/blockchain/ethereum/network/devp2p"}}');var c=i(74848),s=i(28453);const r={},d=void 0,o={},t=[{value:"Opcode \u6210\u672c\u901f\u67e5\u4e0e\u5185\u5b58\u6269\u5c55",id:"opcode-\u6210\u672c\u901f\u67e5\u4e0e\u5185\u5b58\u6269\u5c55",level:2},{value:"\u8bbf\u95ee\u51b7\u70ed\u4e0e\u9644\u52a0\u6210\u672c\uff08EIP-2929\uff09",id:"\u8bbf\u95ee\u51b7\u70ed\u4e0e\u9644\u52a0\u6210\u672ceip-2929",level:3},{value:"\u5b58\u50a8\u5199\u5165\uff08EIP-2200/3529 \u6458\u8981\uff09",id:"\u5b58\u50a8\u5199\u5165eip-22003529-\u6458\u8981",level:3},{value:"\u54c8\u5e0c\u4e0e\u65e5\u5fd7",id:"\u54c8\u5e0c\u4e0e\u65e5\u5fd7",level:3},{value:"\u8c03\u7528\u65cf\u4e0e\u8d26\u6237\u521b\u5efa",id:"\u8c03\u7528\u65cf\u4e0e\u8d26\u6237\u521b\u5efa",level:3},{value:"\u7b97\u672f/\u4f4d\u8fd0\u7b97\uff08\u4ee3\u8868\u6027\uff09",id:"\u7b97\u672f\u4f4d\u8fd0\u7b97\u4ee3\u8868\u6027",level:3},{value:"\u5185\u5b58\u6269\u5c55\u516c\u5f0f",id:"\u5185\u5b58\u6269\u5c55\u516c\u5f0f",level:3},{value:"\u9000\u6b3e\u4e0e\u4e0a\u9650\uff08EIP-3529\uff09",id:"\u9000\u6b3e\u4e0e\u4e0a\u9650eip-3529",level:3}];function h(e){const n={code:"code",em:"em",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",ul:"ul",...(0,s.R)(),...e.components};return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(n.h2,{id:"opcode-\u6210\u672c\u901f\u67e5\u4e0e\u5185\u5b58\u6269\u5c55",children:"Opcode \u6210\u672c\u901f\u67e5\u4e0e\u5185\u5b58\u6269\u5c55"}),"\n",(0,c.jsx)(n.p,{children:"\u672c\u9875\u6c47\u603b\u5e38\u7528\u6307\u4ee4\u6210\u672c\u4e0e\u5185\u5b58\u6269\u5c55\u516c\u5f0f\uff0c\u4fbf\u4e8e\u4f30\u7b97 gas\u3002\u5b9e\u9645\u6570\u503c\u968f\u786c\u5206\u53c9/EIP \u53ef\u80fd\u8c03\u6574\uff0c\u8bf7\u4ee5\u5ba2\u6237\u7aef\u5b9e\u73b0\u4e3a\u51c6\uff08Berlin/London/Shanghai/Dencun \u4e4b\u540e\u7684\u4e00\u822c\u53d6\u503c\uff09\u3002"}),"\n",(0,c.jsx)(n.h3,{id:"\u8bbf\u95ee\u51b7\u70ed\u4e0e\u9644\u52a0\u6210\u672ceip-2929",children:"\u8bbf\u95ee\u51b7\u70ed\u4e0e\u9644\u52a0\u6210\u672c\uff08EIP-2929\uff09"}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsxs)(n.li,{children:["\u8d26\u6237\u9996\u6b21\u8bbf\u95ee\uff08BALANCE/EXT",(0,c.jsx)(n.em,{children:"CALL/CALL"})," \u7b49\uff09\uff1a\u989d\u5916\u201c\u51b7\u8d26\u6237\u201d\u6210\u672c \u2248 2600\uff0c\u540e\u7eed\u540c\u4ea4\u6613\u5185\u4e3a\u201c\u70ed\u201d"]}),"\n",(0,c.jsx)(n.li,{children:"\u5b58\u50a8\u69fd\u9996\u6b21\u8bbf\u95ee\uff08SLOAD/SSTORE\uff09\uff1a\u989d\u5916\u201c\u51b7\u69fd\u201d\u6210\u672c \u2248 2100\uff1bSLOAD \u70ed\u8bfb \u2248 100"}),"\n"]}),"\n",(0,c.jsx)(n.h3,{id:"\u5b58\u50a8\u5199\u5165eip-22003529-\u6458\u8981",children:"\u5b58\u50a8\u5199\u5165\uff08EIP-2200/3529 \u6458\u8981\uff09"}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsx)(n.li,{children:"0 \u2192 \u975e 0\uff1a\u9ad8\u6210\u672c\uff08\u7ea6 20k\uff09"}),"\n",(0,c.jsx)(n.li,{children:"\u975e 0 \u2192 0\uff1a\u4e2d\u6210\u672c\uff08\u7ea6 5k\uff09\uff0c\u5e76\u4ea7\u751f\u9000\u6b3e\uff08EIP-3529 \u540e\u7ea6 4800\uff0c\u4e0a\u9650\u89c1\u9000\u6b3e\u89c4\u5219\uff09"}),"\n",(0,c.jsx)(n.li,{children:"\u975e 0 \u2192 \u975e 0\uff08\u4e0d\u540c\u503c\uff09\uff1a\u4e2d\u6210\u672c\uff08\u7ea6 5k\uff09"}),"\n",(0,c.jsx)(n.li,{children:"\u91cd\u5199\u76f8\u540c\u503c\uff08no-op\uff09\uff1a\u4f4e\u6210\u672c\uff08\u2248 100\uff09"}),"\n",(0,c.jsx)(n.li,{children:"\u9996\u6b21\u89e6\u8fbe\u69fd\u4f4d\u53e6\u52a0\u201c\u51b7\u69fd\u201d\u6210\u672c\uff08\u2248 2100\uff09"}),"\n"]}),"\n",(0,c.jsx)(n.h3,{id:"\u54c8\u5e0c\u4e0e\u65e5\u5fd7",children:"\u54c8\u5e0c\u4e0e\u65e5\u5fd7"}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsx)(n.li,{children:"KECCAK256\uff08SHA3\uff09\uff1a\u57fa\u51c6 + \u6309 32 \u5b57\u8282\u5b57\u6570\u7ebf\u6027\u589e\u957f"}),"\n",(0,c.jsx)(n.li,{children:"LOG0..LOG4\uff1a\u57fa\u51c6 + \u6bcf\u4e2a topic \u989d\u5916\u6210\u672c + data \u6bcf\u5b57\u8282\u7ebf\u6027\u6210\u672c"}),"\n"]}),"\n",(0,c.jsx)(n.h3,{id:"\u8c03\u7528\u65cf\u4e0e\u8d26\u6237\u521b\u5efa",children:"\u8c03\u7528\u65cf\u4e0e\u8d26\u6237\u521b\u5efa"}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsx)(n.li,{children:"CALL/STATICCALL/DELEGATECALL\uff1a\u57fa\u51c6\u8c03\u7528\u6210\u672c + \u51b7\u8d26\u6237\u9644\u52a0\uff1b\u8f6c\u8d26\uff08value>0\uff09\u6709\u989d\u5916\u6210\u672c"}),"\n",(0,c.jsx)(n.li,{children:"\u901a\u8fc7 CALL \u5411\u201c\u65b0\u8d26\u6237\u201d\u8f6c\u8d26\u4f1a\u89e6\u53d1\u65b0\u5efa\u8d26\u6237\u6210\u672c\uff08\u7ea6 25k\uff09\uff0c\u4ec5\u5f53\u8d26\u6237\u6b64\u524d\u4e0d\u5b58\u5728\u4e14\u8f6c\u8d26\u540e\u975e\u7a7a"}),"\n"]}),"\n",(0,c.jsx)(n.h3,{id:"\u7b97\u672f\u4f4d\u8fd0\u7b97\u4ee3\u8868\u6027",children:"\u7b97\u672f/\u4f4d\u8fd0\u7b97\uff08\u4ee3\u8868\u6027\uff09"}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsxs)(n.li,{children:["Verylow\uff08\u22483\uff09\uff1a",(0,c.jsx)(n.code,{children:"ADD/SUB/AND/OR/XOR/NOT/SHL/SHR/SAR/ISZERO/..."})]}),"\n",(0,c.jsxs)(n.li,{children:["Low\uff08\u22485\uff09\uff1a",(0,c.jsx)(n.code,{children:"MUL/DIV/SDIV/MOD/SMOD/ADDMOD/MULMOD/SIGNEXTEND"})]}),"\n",(0,c.jsxs)(n.li,{children:["EXP\uff1a",(0,c.jsx)(n.code,{children:"10 + 50 * \u6309\u6307\u6570\u5b57\u8282\u6570"}),"\uff08\u8fd1\u4f3c\uff09"]}),"\n"]}),"\n",(0,c.jsx)(n.h3,{id:"\u5185\u5b58\u6269\u5c55\u516c\u5f0f",children:"\u5185\u5b58\u6269\u5c55\u516c\u5f0f"}),"\n",(0,c.jsxs)(n.p,{children:["\u4ee5\u201c32 \u5b57\u4e3a\u5355\u4f4d\u201d\u7684\u5185\u5b58\u5927\u5c0f ",(0,c.jsx)(n.code,{children:"a"}),"\uff0c\u5185\u5b58\u6210\u672c\u51fd\u6570\uff1a"]}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-text",children:"Cmem(a) = Gmemory * a + floor(a^2 / 512)\n// Gmemory \u901a\u5e38\u4e3a 3\uff1b\u6269\u5c55\u6210\u672c = Cmem(a_new) - Cmem(a_old)\n"})}),"\n",(0,c.jsx)(n.p,{children:"\u62f7\u8d1d\u7c7b\u6307\u4ee4\uff08CALLDATACOPY/CODECOPY/EXTCODECOPY/RETURNDATACOPY\uff09= \u57fa\u51c6 + \u6bcf 32 \u5b57\u7ebf\u6027 + \u5185\u5b58\u6269\u5c55"}),"\n",(0,c.jsx)(n.h3,{id:"\u9000\u6b3e\u4e0e\u4e0a\u9650eip-3529",children:"\u9000\u6b3e\u4e0e\u4e0a\u9650\uff08EIP-3529\uff09"}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsx)(n.li,{children:"\u9000\u6b3e\u8ba1\u6570\u5668\u4e0d\u8d85\u8fc7\u201c\u4ea4\u6613\u5b9e\u9645\u6d88\u8017 gas \u7684 20%\u201d"}),"\n",(0,c.jsx)(n.li,{children:"SELFDESTRUCT \u9000\u6b3e\u88ab\u79fb\u9664\uff1bSSTORE \u6e05\u96f6\u9000\u6b3e\u663e\u8457\u964d\u4f4e\uff08\u7ea6 4800\uff09"}),"\n"]}),"\n",(0,c.jsx)(n.p,{children:"\u63d0\u793a\uff1a\u4ee5\u4e0a\u4e3a\u5de5\u7a0b\u4f30\u7b97\u5e38\u7528\u503c/\u516c\u5f0f\uff0c\u7cbe\u786e\u8868\u8bf7\u53c2\u8003\u5ba2\u6237\u7aef\uff08geth\u3001reth\u3001nethermind\uff09\u5e38\u91cf\u4e0e EIP \u89c4\u8303\u5b9e\u73b0\u3002"})]})}function a(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,c.jsx)(n,{...e,children:(0,c.jsx)(h,{...e})}):h(e)}}}]);
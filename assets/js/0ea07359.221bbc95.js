"use strict";(self.webpackChunkdubuqingfeng=self.webpackChunkdubuqingfeng||[]).push([[2437],{26087:(n,e,t)=>{t.r(e),t.d(e,{assets:()=>s,contentTitle:()=>a,default:()=>m,frontMatter:()=>o,metadata:()=>c,toc:()=>d});const c=JSON.parse('{"id":"Wiki/programming/cpp/concurrency/atomic","title":"atomic","description":"\u539f\u5b50\u64cd\u4f5c std::atomic","source":"@site/docs/Wiki/programming/cpp/concurrency/atomic.md","sourceDirName":"Wiki/programming/cpp/concurrency","slug":"/Wiki/programming/cpp/concurrency/atomic","permalink":"/docs/Wiki/programming/cpp/concurrency/atomic","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"C++","permalink":"/docs/wiki/programming/cpp"},"next":{"title":"condition-variable","permalink":"/docs/Wiki/programming/cpp/concurrency/condition-variable"}}');var i=t(74848),r=t(28453);const o={},a=void 0,s={},d=[{value:"\u539f\u5b50\u64cd\u4f5c std::atomic",id:"\u539f\u5b50\u64cd\u4f5c-stdatomic",level:3}];function p(n){const e={code:"code",h3:"h3",p:"p",pre:"pre",...(0,r.R)(),...n.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(e.h3,{id:"\u539f\u5b50\u64cd\u4f5c-stdatomic",children:"\u539f\u5b50\u64cd\u4f5c std::atomic"}),"\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.code,{children:"std::atomic<T>"})," \u63d0\u4f9b\u65e0\u9501/\u6709\u9501\u7684\u539f\u5b50\u8bfb\u5199\u4e0e RMW \u64cd\u4f5c\uff0c\u9ed8\u8ba4\u4f7f\u7528 ",(0,i.jsx)(e.code,{children:"seq_cst"})," \u5185\u5b58\u5e8f\u3002"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-cpp",children:"#include <atomic>\n#include <thread>\n#include <vector>\n\nstd::atomic<int> counter{0};\n\nvoid inc() { counter.fetch_add(1, std::memory_order_relaxed); }\n\nint main() {\n  std::vector<std::thread> v;\n  for (int i = 0; i < 1'000; ++i) v.emplace_back(inc);\n  for (auto &t : v) t.join();\n}\n"})}),"\n",(0,i.jsx)(e.p,{children:"\u6ce8\u610f\uff1a\u9009\u62e9\u5408\u9002\u7684\u5185\u5b58\u5e8f\uff08relaxed/acquire-release/seq_cst\uff09\uff0c\u5c3d\u91cf\u5c01\u88c5\u5728\u66f4\u9ad8\u5c42\u62bd\u8c61\u4e2d\u3002"})]})}function m(n={}){const{wrapper:e}={...(0,r.R)(),...n.components};return e?(0,i.jsx)(e,{...n,children:(0,i.jsx)(p,{...n})}):p(n)}},28453:(n,e,t)=>{t.d(e,{R:()=>o,x:()=>a});var c=t(96540);const i={},r=c.createContext(i);function o(n){const e=c.useContext(r);return c.useMemo((function(){return"function"==typeof n?n(e):{...e,...n}}),[e,n])}function a(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(i):n.components||i:o(n.components),c.createElement(r.Provider,{value:e},n.children)}}}]);
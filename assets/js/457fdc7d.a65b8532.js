"use strict";(self.webpackChunkdubuqingfeng=self.webpackChunkdubuqingfeng||[]).push([[6939],{40845:(e,a,n)=>{n.r(a),n.d(a,{assets:()=>c,contentTitle:()=>o,default:()=>u,frontMatter:()=>s,metadata:()=>t,toc:()=>k});const t=JSON.parse('{"id":"Wiki/programming/database/clickhouse/kafka-mv","title":"Kafka \u4e0e\u7269\u5316\u89c6\u56fe\u6444\u5165","description":"\u901a\u8fc7 Kafka \u5f15\u64ce + \u7269\u5316\u89c6\u56fe\u5b9e\u73b0\u6d41\u5f0f\u6444\u5165\u4e0e\u843d\u5730\u3002","source":"@site/docs/Wiki/programming/database/clickhouse/kafka-mv.md","sourceDirName":"Wiki/programming/database/clickhouse","slug":"/Wiki/programming/database/clickhouse/kafka-mv","permalink":"/docs/Wiki/programming/database/clickhouse/kafka-mv","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"title":"Kafka \u4e0e\u7269\u5316\u89c6\u56fe\u6444\u5165"},"sidebar":"tutorialSidebar","previous":{"title":"JOIN \u7b56\u7565\u4e0e\u8bbe\u7f6e","permalink":"/docs/Wiki/programming/database/clickhouse/joins"},"next":{"title":"\u5206\u533a/\u5206\u7247/\u526f\u672c","permalink":"/docs/Wiki/programming/database/clickhouse/partitions-shards-replication"}}');var i=n(74848),r=n(28453);const s={title:"Kafka \u4e0e\u7269\u5316\u89c6\u56fe\u6444\u5165"},o=void 0,c={},k=[{value:"\u793a\u4f8b",id:"\u793a\u4f8b",level:2}];function l(e){const a={code:"code",h2:"h2",p:"p",pre:"pre",...(0,r.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(a.p,{children:"\u901a\u8fc7 Kafka \u5f15\u64ce + \u7269\u5316\u89c6\u56fe\u5b9e\u73b0\u6d41\u5f0f\u6444\u5165\u4e0e\u843d\u5730\u3002"}),"\n",(0,i.jsx)(a.h2,{id:"\u793a\u4f8b",children:"\u793a\u4f8b"}),"\n",(0,i.jsx)(a.pre,{children:(0,i.jsx)(a.code,{className:"language-sql",children:"CREATE TABLE raw_kafka (\n  user_id UInt64, ts DateTime, action String, value Float64\n)\nENGINE = Kafka SETTINGS kafka_broker_list='k1:9092', kafka_topic_list='events', kafka_group_name='cg', kafka_format='JSONEachRow';\n\nCREATE TABLE events (...)\nENGINE = MergeTree PARTITION BY toYYYYMM(ts) ORDER BY (user_id, ts);\n\nCREATE MATERIALIZED VIEW mv TO events AS\nSELECT user_id, ts, action, value FROM raw_kafka;\n"})}),"\n",(0,i.jsx)(a.p,{children:"\u7269\u5316\u89c6\u56fe\u5c06 Kafka \u884c\u81ea\u52a8\u5199\u5165 MergeTree \u76ee\u6807\u8868\u3002"})]})}function u(e={}){const{wrapper:a}={...(0,r.R)(),...e.components};return a?(0,i.jsx)(a,{...e,children:(0,i.jsx)(l,{...e})}):l(e)}},28453:(e,a,n)=>{n.d(a,{R:()=>s,x:()=>o});var t=n(96540);const i={},r=t.createContext(i);function s(e){const a=t.useContext(r);return t.useMemo((function(){return"function"==typeof e?e(a):{...a,...e}}),[a,e])}function o(e){let a;return a=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:s(e.components),t.createElement(r.Provider,{value:a},e.children)}}}]);
"use strict";(globalThis.webpackChunkdubuqingfeng=globalThis.webpackChunkdubuqingfeng||[]).push([[61342],{10962:(s,n,e)=>{e.r(n),e.d(n,{assets:()=>d,contentTitle:()=>l,default:()=>h,frontMatter:()=>c,metadata:()=>i,toc:()=>o});var i=e(42153),r=e(74848),t=e(28453);const c={title:"Linux VPS\u7684\u4e00\u4e9b\u914d\u7f6e",description:"0x01 \u66f4\u6539\u9ed8\u8ba4ssh\u767b\u5f55\u7aef\u53e3 \u4e00\u822cssh\u662f\u5f00\u653e\u7684\uff0c\u5bb9\u6613\u53d7\u5230\u653b\u51fb\u6216\u8005\u7206\u7834\u7b49\u884c\u4e3a\u3002 vim #vi /etc/ssh/sshd_config",date:"2015-05-16 12:53",updated:"2015-05-16 12:53",tags:["linux","vps","\u6280\u672f"],excerpt:"\u5bf9\u4e8eLinux\u7684VPS\u7684\u4e00\u4e9b\u57fa\u7840\u8bbe\u7f6e\uff0c\u4f8b\u5982\u66f4\u6362\u7aef\u53e3\uff0c\u52a0\u5f3a\u767b\u5f55\u9a8c\u8bc1\uff0c\u65e5\u5fd7\u7684\u8bb0\u5f55\uff0cshadowsocks\u7684\u5b89\u88c5\uff0cshadowsocks\u7684\u4f18\u5316\u7b49\u3002",categories:"linux",permalink:"201505-vps-base-setting.html",author:"admin",toc:!0},l="0x01 \u66f4\u6539\u9ed8\u8ba4ssh\u767b\u5f55\u7aef\u53e3",d={authorsImageUrls:[void 0]},o=[];function p(s){const n={code:"code",h1:"h1",p:"p",pre:"pre",...(0,t.R)(),...s.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.p,{children:"\u4e00\u822cssh\u662f\u5f00\u653e\u7684\uff0c\u5bb9\u6613\u53d7\u5230\u653b\u51fb\u6216\u8005\u7206\u7834\u7b49\u884c\u4e3a\u3002"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-vim",children:"#vi /etc/ssh/sshd_config\n\n#Port 22             //\u5148\u628a22\u6ce8\u91ca\u6389\n"})}),"\n",(0,r.jsx)(n.p,{children:"Port 2754            //\u6dfb\u52a0\u4e00\u4e2a\u65b0\u7684\u7aef\u53e3"}),"\n",(0,r.jsx)(n.p,{children:"\u91cd\u542fssh\u670d\u52a1"}),"\n",(0,r.jsx)(n.p,{children:"service sshd restart"}),"\n",(0,r.jsx)(n.h1,{id:"0x02-\u4f7f\u7528\u5bc6\u94a5\u767b\u5f55\u800c\u4e0d\u662f\u5bc6\u7801",children:"0x02 \u4f7f\u7528\u5bc6\u94a5\u767b\u5f55\u800c\u4e0d\u662f\u5bc6\u7801"}),"\n",(0,r.jsx)(n.p,{children:"\u5728\u4e00\u4e2a\u81ea\u7528\u7684vps\u4e0a\uff0c\u907f\u514d\u4f7f\u7528\u5bc6\u7801\u767b\u5f55\uff0c\u59a5\u5584\u4fdd\u7ba1\u597d\u5bc6\u94a5\uff0c\u53ef\u4ee5\u63d0\u9ad8\u4e00\u5b9a\u7684\u5b89\u5168\u6027\u3002"}),"\n",(0,r.jsx)(n.p,{children:"\u4e00\u5f00\u59cb\u4f7f\u7528Xshell\u7684\u5bc6\u94a5\u751f\u6210\u5de5\u5177\uff0c\u5728\u5de5\u5177\u9009\u9879\u5361\u4e2d\uff0c\u6709\u65b0\u5efa\u7528\u6237\u5bc6\u94a5\u751f\u6210\u5411\u5bfc\uff0c\u9009\u62e9RSA\uff0c\u5bc6\u94a5\u957f\u5ea6\u4e3a2048\u4f4d\uff0c\u4e0b\u4e00\u6b65\u8f93\u5165\u79c1\u94a5\u5bc6\u7801\uff0c\u6d89\u53ca\u5230\u4e86\u975e\u5bf9\u79f0\u52a0\u5bc6\uff0c\u8be6\u7ec6\u539f\u7406\u6b63\u5728\u8bfb\u300a\u6df1\u5165\u6d45\u51fa\u5bc6\u7801\u5b66\u300b\uff0c\u4e00\u4e9bRSA\u7b97\u6cd5\uff0c\u5728256\u4f4d\u5bc6\u94a5\u4ee5\u4e0a\u8fdb\u884c\u86ee\u529b\u653b\u51fb\u65f6\u8017\u8d39\u65f6\u95f4\u8f83\u957f\u3002\u751f\u6210\u4e86pub\u683c\u5f0f\u7684\u516c\u94a5\u3002"}),"\n",(0,r.jsx)(n.p,{children:"\u5c06\u6211\u4eec\u751f\u6210\u7684pub\u516c\u94a5\u6587\u4ef6\u4e0a\u4f20\u5230/root/.ssh\u6587\u4ef6\u5939\u4e0b\u9762\uff08\u5982\u679c\u6ca1\u6709\u6211\u4eec\u9700\u8981\u521b\u5efa\uff09\uff0c\u7136\u540e\u6211\u4eec\u9700\u8981\u5c06id_rsa_2048.pub\u91cd\u547d\u540d\u4e3aauthorized_keys \u5e76\u4e14\u7528chmod 600 authorized_keys\u8bbe\u7f6e\u6743\u9650\u3002"}),"\n",(0,r.jsx)(n.p,{children:"chmod 600 /root/.ssh/authorized_keys"}),"\n",(0,r.jsx)(n.p,{children:"\u627e\u5230/etc/ssh/sshd_config \uff0c\u628aRSAAuthentication\u548cPubkeyAuthentication\u4e24\u884c\u524d\u9762\u7684#\u6ce8\u91ca\u53bb\u6389\u3002"}),"\n",(0,r.jsx)(n.p,{children:"vi /etc/ssh/sshd_config"}),"\n",(0,r.jsx)(n.p,{children:"\u91cd\u542fsshd\u670d\u52a1\u7684\u53e6\u4e00\u79cd\u65b9\u6cd5\uff1a"}),"\n",(0,r.jsx)(n.p,{children:"Debian/Ubuntu\u6267\u884c\uff1a/etc/init.d/ssh restart"}),"\n",(0,r.jsx)(n.p,{children:"CentOS\u6267\u884c\uff1a/etc/init.d/sshd restart"}),"\n",(0,r.jsx)(n.p,{children:"\u7981\u6b62\u5bc6\u7801\u767b\u5f55\uff1a"}),"\n",(0,r.jsx)(n.p,{children:"vi /etc/ssh/sshd_config \u6587\u4ef6"}),"\n",(0,r.jsx)(n.p,{children:"\u627e\u5230PasswordAuthentication\u540e\u9762\u7684yes\u6539\u6210no\u3002"}),"\n",(0,r.jsx)(n.h1,{id:"0x03-\u67e5\u770b\u767b\u5f55\u65e5\u5fd7",children:"0x03 \u67e5\u770b\u767b\u5f55\u65e5\u5fd7"}),"\n",(0,r.jsx)(n.p,{children:"\u9996\u5148\u8fdb\u5165\u65e5\u5fd7\u76ee\u5f55\uff1a"}),"\n",(0,r.jsx)(n.p,{children:"cd /var/log"}),"\n",(0,r.jsx)(n.p,{children:"\u67e5\u770bssh\u7528\u6237\u7684\u767b\u5f55\u65e5\u5fd7\uff1a"}),"\n",(0,r.jsx)(n.p,{children:"less secure"}),"\n",(0,r.jsx)(n.p,{children:"\u67e5\u770b\u767b\u5f55\u6210\u529f\u7684ip\u4fe1\u606f\uff1a"}),"\n",(0,r.jsx)(n.p,{children:"last"}),"\n",(0,r.jsx)(n.p,{children:"\u67e5\u770b\u767b\u5f55\u5931\u8d25\u7684ip\u4fe1\u606f\uff1a"}),"\n",(0,r.jsx)(n.p,{children:"lastb"}),"\n",(0,r.jsx)(n.h1,{id:"0x04-\u914d\u7f6eshadowsocks",children:"0x04 \u914d\u7f6eshadowsocks"}),"\n",(0,r.jsx)(n.p,{children:"\u5b89\u88c5setuptools"}),"\n",(0,r.jsx)(n.p,{children:"yum install -y python-setuptools"}),"\n",(0,r.jsx)(n.p,{children:"\u5b89\u88c5\u5b8c\u6bd5\u540e\uff0ceasy_install\u547d\u4ee4\u5c31\u53ef\u4ee5\u4f7f\u7528\u4e86\u3002"}),"\n",(0,r.jsx)(n.p,{children:"\u5b89\u88c5pip\uff0c\u9ed8\u8ba4\u5b89\u88c5\u5230/usr/bin\u76ee\u5f55\u4e0b\u3002"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"easy_install pip\npip install shadowsocks\n"})}),"\n",(0,r.jsx)(n.p,{children:"\u521b\u5efashadowsocks\u7684\u914d\u7f6e\u6587\u4ef6\uff1a"}),"\n",(0,r.jsx)(n.p,{children:"vi /etc/shadowsocks.json"}),"\n",(0,r.jsx)(n.p,{children:"\u5185\u5bb9\u5982\u4e0b\uff1a"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n        "server":"your_server_ip",\n        "server_port":8989,\n        "local_address": "127.0.0.1",\n        "local_port":1080,\n        "password":"yourpassword",\n        "timeout":600,\n        "method":"aes-256-cfb",\n        "fast_open": false,\n        "workers": 1\n}\n'})}),"\n",(0,r.jsx)(n.p,{children:"\u4e00\u4e9b\u4f18\u5316\uff1a"}),"\n",(0,r.jsx)(n.p,{children:"\u5b89\u88c5 gevent\u53ef\u4ee5\u63d0\u9ad8 Shadowsocks\u7684\u6027\u80fd\u3002CentOS\u4e0b\u5b89\u88c5gevent\u4f9d\u8d56libevent\u548cgreenlet\u3002"}),"\n",(0,r.jsx)(n.p,{children:"\u5b89\u88c5libevent\uff1a"}),"\n",(0,r.jsx)(n.p,{children:"yum install -y libevent"}),"\n",(0,r.jsx)(n.p,{children:"\u5b89\u88c5greenlet\uff1a"}),"\n",(0,r.jsx)(n.p,{children:"pip install greenlet"}),"\n",(0,r.jsx)(n.p,{children:"\u5b89\u88c5gevent\uff1a"}),"\n",(0,r.jsx)(n.p,{children:"pip install gevent"}),"\n",(0,r.jsx)(n.p,{children:"\u8fd0\u884cshadowsocks\u670d\u52a1\u7aef\uff1a"}),"\n",(0,r.jsx)(n.p,{children:"ssserver -c /etc/shadowsocks.json"}),"\n",(0,r.jsx)(n.p,{children:"\u5982\u679c\u60f3\u5728\u540e\u53f0\u4e00\u76f4\u8fd0\u884cShadowsocks\uff0c\u542f\u52a8\u547d\u4ee4\u5982\u4e0b\uff1a"}),"\n",(0,r.jsx)(n.p,{children:"nohup ssserver -c /etc/shadowsocks.json > /dev/null 2>&1 &"}),"\n",(0,r.jsx)(n.p,{children:"\u9632\u706b\u5899\u7684\u8bbe\u7f6e"}),"\n",(0,r.jsx)(n.p,{children:"\u7f16\u8f91\u9632\u706b\u5899\u914d\u7f6e\u6587\u4ef6/etc/sysconfig/iptables\uff0c\u5c06\u670d\u52a1\u5668\u7aef\u53e3\uff08server_port\uff09\u653e\u884c\u3002 \u65b0\u589e\u4e00\u6761\u9632\u706b\u5899\u89c4\u5219\uff1a"}),"\n",(0,r.jsx)(n.p,{children:"-A INPUT -m state --state NEW -m tcp -p tcp --dport 8989 -j ACCEPT"}),"\n",(0,r.jsx)(n.p,{children:"\u91cd\u542f\u9632\u706b\u5899iptables\uff1a"}),"\n",(0,r.jsx)(n.p,{children:"service iptables restart"}),"\n",(0,r.jsx)(n.p,{children:"\u4f7f\u7528docker\u90e8\u7f72shadowsocks\u670d\u52a1\u3002"}),"\n",(0,r.jsx)(n.p,{children:"1.\u5b89\u88c5\u5e76\u6d4b\u8bd5Docker\uff0c\u53ef\u4ee5\u53c2\u8003\u5b98\u65b9\u6587\u6863\u3002\u6216\u8005\u662f\u300aDocker\u5165\u95e8\u4e0e\u5b9e\u8df5\u300b\u5b89\u88c5\u4e00\u8282\u3002"}),"\n",(0,r.jsx)(n.p,{children:"2.\u62c9\u53d6\u955c\u50cf"}),"\n",(0,r.jsxs)(n.p,{children:["docker pull dubuqingfeng/shadowsocks",":vps"]}),"\n",(0,r.jsx)(n.p,{children:"3.\u8fd0\u884c\u5bb9\u5668"}),"\n",(0,r.jsxs)(n.p,{children:["docker run -d -p 1984:1984 dubuqingfeng/shadowsocks",":vps"," -p 1984 -k sspassword -m aes-256-cfb"]}),"\n",(0,r.jsx)(n.p,{children:"1984\u5373\u4e3a\u670d\u52a1\u5668\u7aef\u53e3\u3002"}),"\n",(0,r.jsx)(n.p,{children:"sspassword\u4e3a\u8fde\u63a5\u5bc6\u7801\uff0c\u81ea\u884c\u66f4\u6362\u3002"}),"\n",(0,r.jsx)(n.p,{children:"aes-256-cfb\u4e3a\u52a0\u5bc6\u65b9\u5f0f\u3002"}),"\n",(0,r.jsx)(n.p,{children:"\u4e5f\u53ef\u4ee5\u4f7f\u7528-c /etc/shadowsocks.json\u53c2\u6570\u3002"}),"\n",(0,r.jsx)(n.p,{children:"4.\u6d4b\u8bd5\u8fd0\u884c"}),"\n",(0,r.jsx)(n.p,{children:"docker ps -a\n\u5982\u679c\u51fa\u73b0up\u5373\u4e3a\u5b89\u88c5\u6210\u529f\u3002"}),"\n",(0,r.jsx)(n.p,{children:"Centos7\u7248\u672c\uff1a"}),"\n",(0,r.jsx)(n.p,{children:"docker pull index.alauda.cn/dubuqingfeng/centos7-shadowsocks"}),"\n",(0,r.jsx)(n.p,{children:"\u8fd0\u884c\u5bb9\u5668"}),"\n",(0,r.jsx)(n.p,{children:"docker run -d -p 1984:1984 index.alauda.cn/dubuqingfeng/centos7-shadowsocks -p 1984 -k sspassword -m aes-256-cfb"}),"\n",(0,r.jsx)(n.p,{children:"PS\uff1a\u73b0\u5728\u63d0\u5347ss\u901f\u5ea6\uff0c\u53ef\u4ee5\u901a\u8fc7\u5f00\u542fBBR\u7684\u65b9\u6cd5\u3002\uff0820161101\uff09"}),"\n",(0,r.jsx)(n.h1,{id:"0x05-koding\u73af\u5883\u914d\u7f6epelican\u7b80\u8bb0",children:"0x05 Koding\u73af\u5883\u914d\u7f6epelican\u7b80\u8bb0"}),"\n",(0,r.jsx)(n.p,{children:"Koding\u662f\u4e00\u4e2a\u5728\u7ebfIDE\u73af\u5883\uff0c\u9002\u5408\u8fdb\u884cWeb\u65b9\u9762\u7684\u5f00\u53d1\uff0c\u652f\u6301Java\u3001PHP\u3001NodeJS\u3001Perl\u3001Python\u3001Ruby\u3001C\u3001C++\u548cGo\u7b49\u7f16\u7a0b\u8bed\u8a00\uff0c\u8c8c\u4f3c\u4e0d\u592a\u597d\u7ed1\u5b9a\u81ea\u5b9a\u4e49\u57df\u540d\u3002"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"sudo apt-get install python-pip\npip install pelican\nsudo apt-get install python-virtualenv\n"})}),"\n",(0,r.jsx)(n.h1,{id:"0x06-\u540e\u8bb0",children:"0x06 \u540e\u8bb0"}),"\n",(0,r.jsx)(n.p,{children:"\u9700\u8981\u8fdb\u4e00\u6b65\u5b66\u4e60SSH\u534f\u8bae\uff0cLinux\u670d\u52a1\u5668\u7ba1\u7406\uff0c\u5bc6\u7801\u5b66\uff0csock5\u4ee3\u7406\uff0ciptables\u3002"}),"\n",(0,r.jsx)(n.p,{children:"\u8def\u6f2b\u6f2b\uff0c\u76d6\u4f59\u4e4b\u52e4\u4e14\u8270\u82e5\u6b64\u3002"}),"\n",(0,r.jsx)(n.p,{children:"\u4e13\u6ce8\u5730\u505a\u597d\u6bcf\u4e00\u4ef6\u4e8b\u3002"})]})}function h(s={}){const{wrapper:n}={...(0,t.R)(),...s.components};return n?(0,r.jsx)(n,{...s,children:(0,r.jsx)(p,{...s})}):p(s)}},28453:(s,n,e)=>{e.d(n,{R:()=>c,x:()=>l});var i=e(96540);const r={},t=i.createContext(r);function c(s){const n=i.useContext(t);return i.useMemo(function(){return"function"==typeof s?s(n):{...n,...s}},[n,s])}function l(s){let n;return n=s.disableParentContext?"function"==typeof s.components?s.components(r):s.components||r:c(s.components),i.createElement(t.Provider,{value:n},s.children)}},42153:s=>{s.exports=JSON.parse('{"permalink":"/blog/201505-vps-base-setting","source":"@site/blog/201505-vps-base-setting.md","title":"Linux VPS\u7684\u4e00\u4e9b\u914d\u7f6e","description":"0x01 \u66f4\u6539\u9ed8\u8ba4ssh\u767b\u5f55\u7aef\u53e3 \u4e00\u822cssh\u662f\u5f00\u653e\u7684\uff0c\u5bb9\u6613\u53d7\u5230\u653b\u51fb\u6216\u8005\u7206\u7834\u7b49\u884c\u4e3a\u3002 vim #vi /etc/ssh/sshd_config","date":"2015-05-16T12:53:00.000Z","tags":[{"inline":true,"label":"linux","permalink":"/blog/tags/linux"},{"inline":true,"label":"vps","permalink":"/blog/tags/vps"},{"inline":true,"label":"\u6280\u672f","permalink":"/blog/tags/\u6280\u672f"}],"readingTime":3.26,"hasTruncateMarker":false,"authors":[{"name":"admin","key":null,"page":null}],"frontMatter":{"title":"Linux VPS\u7684\u4e00\u4e9b\u914d\u7f6e","description":"0x01 \u66f4\u6539\u9ed8\u8ba4ssh\u767b\u5f55\u7aef\u53e3 \u4e00\u822cssh\u662f\u5f00\u653e\u7684\uff0c\u5bb9\u6613\u53d7\u5230\u653b\u51fb\u6216\u8005\u7206\u7834\u7b49\u884c\u4e3a\u3002 vim #vi /etc/ssh/sshd_config","date":"2015-05-16 12:53","updated":"2015-05-16 12:53","tags":["linux","vps","\u6280\u672f"],"excerpt":"\u5bf9\u4e8eLinux\u7684VPS\u7684\u4e00\u4e9b\u57fa\u7840\u8bbe\u7f6e\uff0c\u4f8b\u5982\u66f4\u6362\u7aef\u53e3\uff0c\u52a0\u5f3a\u767b\u5f55\u9a8c\u8bc1\uff0c\u65e5\u5fd7\u7684\u8bb0\u5f55\uff0cshadowsocks\u7684\u5b89\u88c5\uff0cshadowsocks\u7684\u4f18\u5316\u7b49\u3002","categories":"linux","permalink":"201505-vps-base-setting.html","author":"admin","toc":true},"unlisted":false,"prevItem":{"title":"\u5982\u4f55\u4f7f\u7528 PreferenceFragment \u65b9\u4fbf\u5730\u5b8c\u6210\u8bbe\u7f6e\u754c\u9762","permalink":"/blog/201506-android-Preference-fragment"},"nextItem":{"title":"\u57fa\u4e8e Arduino \u7684\u89e3\u9b54\u65b9\u673a\u5668\u4eba\u4e00\u4e9b\u603b\u7ed3","permalink":"/blog/201504-Rubik\'s-Cube-Robot-yixiezongjie"}}')}}]);
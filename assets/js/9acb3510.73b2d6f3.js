"use strict";(globalThis.webpackChunkdubuqingfeng=globalThis.webpackChunkdubuqingfeng||[]).push([[99073],{28453:(e,n,i)=>{i.d(n,{R:()=>o,x:()=>c});var s=i(96540);const l={},r=s.createContext(l);function o(e){const n=s.useContext(r);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(l):e.components||l:o(e.components),s.createElement(r.Provider,{value:n},e.children)}},54377:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>t,contentTitle:()=>c,default:()=>h,frontMatter:()=>o,metadata:()=>s,toc:()=>a});const s=JSON.parse('{"id":"Wiki/programming/javascript/async/event-loop","title":"event-loop","description":"\u4e8b\u4ef6\u5faa\u73af\u4e0e\u4efb\u52a1\u961f\u5217","source":"@site/docs/Wiki/programming/javascript/async/event-loop.md","sourceDirName":"Wiki/programming/javascript/async","slug":"/Wiki/programming/javascript/async/event-loop","permalink":"/docs/Wiki/programming/javascript/async/event-loop","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"JavaScript","permalink":"/docs/wiki/programming/javascript"},"next":{"title":"microtask-macrotask","permalink":"/docs/Wiki/programming/javascript/async/microtask-macrotask"}}');var l=i(74848),r=i(28453);const o={},c=void 0,t={},a=[{value:"\u4e8b\u4ef6\u5faa\u73af\u4e0e\u4efb\u52a1\u961f\u5217",id:"\u4e8b\u4ef6\u5faa\u73af\u4e0e\u4efb\u52a1\u961f\u5217",level:3},{value:"ToC",id:"toc",level:4},{value:"\u5b8f\u4efb\u52a1/\u5fae\u4efb\u52a1",id:"\u5b8f\u4efb\u52a1\u5fae\u4efb\u52a1",level:4},{value:"\u6d4f\u89c8\u5668 vs Node.js \u5dee\u5f02",id:"\u6d4f\u89c8\u5668-vs-nodejs-\u5dee\u5f02",level:4},{value:"\u5b9a\u65f6\u5668\u4e0e I/O",id:"\u5b9a\u65f6\u5668\u4e0e-io",level:4},{value:"\u5e38\u89c1\u9677\u9631",id:"\u5e38\u89c1\u9677\u9631",level:4},{value:"\u793a\u4f8b\uff1a\u987a\u5e8f\u4e0e\u5fae\u4efb\u52a1",id:"\u793a\u4f8b\u987a\u5e8f\u4e0e\u5fae\u4efb\u52a1",level:4},{value:"\u793a\u4f8b\uff1a\u907f\u514d\u5f3a\u5236\u540c\u6b65\u5e03\u5c40",id:"\u793a\u4f8b\u907f\u514d\u5f3a\u5236\u540c\u6b65\u5e03\u5c40",level:4}];function d(e){const n={code:"code",h3:"h3",h4:"h4",li:"li",pre:"pre",ul:"ul",...(0,r.R)(),...e.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(n.h3,{id:"\u4e8b\u4ef6\u5faa\u73af\u4e0e\u4efb\u52a1\u961f\u5217",children:"\u4e8b\u4ef6\u5faa\u73af\u4e0e\u4efb\u52a1\u961f\u5217"}),"\n",(0,l.jsx)(n.h4,{id:"toc",children:"ToC"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"\u5b8f\u4efb\u52a1/\u5fae\u4efb\u52a1"}),"\n",(0,l.jsx)(n.li,{children:"\u6d4f\u89c8\u5668 vs Node.js \u5dee\u5f02"}),"\n",(0,l.jsx)(n.li,{children:"\u5b9a\u65f6\u5668\u4e0e I/O"}),"\n",(0,l.jsx)(n.li,{children:"\u5e38\u89c1\u9677\u9631"}),"\n"]}),"\n",(0,l.jsx)(n.h4,{id:"\u5b8f\u4efb\u52a1\u5fae\u4efb\u52a1",children:"\u5b8f\u4efb\u52a1/\u5fae\u4efb\u52a1"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["\u5fae\u4efb\u52a1\uff08microtasks\uff09\uff1a",(0,l.jsx)(n.code,{children:"Promise.then"}),"\u3001",(0,l.jsx)(n.code,{children:"MutationObserver"}),"\u3001queueMicrotask\uff1b"]}),"\n",(0,l.jsxs)(n.li,{children:["\u5b8f\u4efb\u52a1\uff08macrotasks\uff09\uff1a",(0,l.jsx)(n.code,{children:"setTimeout"}),"\u3001",(0,l.jsx)(n.code,{children:"setInterval"}),"\u3001",(0,l.jsx)(n.code,{children:"setImmediate"}),"\uff08Node\uff09\u3001I/O \u4e8b\u4ef6\uff1b"]}),"\n",(0,l.jsx)(n.li,{children:"\u6267\u884c\u987a\u5e8f\uff1a\u5b8f\u4efb\u52a1 \u2192 \u6e05\u7a7a\u6240\u6709\u5fae\u4efb\u52a1 \u2192 \u6e32\u67d3\uff08\u6d4f\u89c8\u5668\uff09\u2192 \u4e0b\u4e00\u4e2a\u5b8f\u4efb\u52a1\u3002"}),"\n"]}),"\n",(0,l.jsx)(n.h4,{id:"\u6d4f\u89c8\u5668-vs-nodejs-\u5dee\u5f02",children:"\u6d4f\u89c8\u5668 vs Node.js \u5dee\u5f02"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"\u6d4f\u89c8\u5668\uff1a\u6e32\u67d3\u65f6\u673a\u4e0e\u4efb\u52a1\u961f\u5217\u4ea4\u66ff\uff1b"}),"\n",(0,l.jsx)(n.li,{children:"Node\uff1alibuv \u4e8b\u4ef6\u5faa\u73af\u9636\u6bb5\uff08timers \u2192 pending callbacks \u2192 idle/prepare \u2192 poll \u2192 check \u2192 close callbacks\uff09\uff0c\u5fae\u4efb\u52a1\u5728\u5404\u9636\u6bb5\u540e\u6e05\u7a7a\u3002"}),"\n"]}),"\n",(0,l.jsx)(n.h4,{id:"\u5b9a\u65f6\u5668\u4e0e-io",children:"\u5b9a\u65f6\u5668\u4e0e I/O"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"setTimeout(fn, 0)"})," \u5e76\u975e\u9a6c\u4e0a\u6267\u884c\uff0c\u53ea\u662f\u5c3d\u5feb\u5b89\u6392\u5728\u540e\u7eed\u5b8f\u4efb\u52a1\uff1b"]}),"\n",(0,l.jsx)(n.li,{children:"\u9ad8\u5e76\u53d1 I/O \u4f9d\u8d56\u975e\u963b\u585e\u4e0e\u56de\u8c03/Promise/async-await \u534f\u4f5c\u3002"}),"\n"]}),"\n",(0,l.jsx)(n.h4,{id:"\u5e38\u89c1\u9677\u9631",children:"\u5e38\u89c1\u9677\u9631"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"\u5fae\u4efb\u52a1\u65e0\u9650\u6392\u961f\u4f1a\u997f\u6b7b\u6e32\u67d3\u6216 I/O\uff1b"}),"\n",(0,l.jsxs)(n.li,{children:["\u5728 ",(0,l.jsx)(n.code,{children:"then"})," \u4e2d\u629b\u51fa\u5f02\u5e38\u4f1a\u8fdb\u5165\u62d2\u7edd\u6001\u94fe\u8def\uff0c\u6ce8\u610f\u6355\u83b7\uff1b"]}),"\n",(0,l.jsx)(n.li,{children:"\u957f\u4efb\u52a1\u963b\u585e\u4e3b\u7ebf\u7a0b\u5bfc\u81f4\u5361\u987f\uff0c\u4f7f\u7528 Web Worker \u5206\u62c5\u8ba1\u7b97\u3002"}),"\n"]}),"\n",(0,l.jsx)(n.h4,{id:"\u793a\u4f8b\u987a\u5e8f\u4e0e\u5fae\u4efb\u52a1",children:"\u793a\u4f8b\uff1a\u987a\u5e8f\u4e0e\u5fae\u4efb\u52a1"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-js",children:"console.log('start');\nsetTimeout(() => console.log('timeout'), 0);\nPromise.resolve().then(() => console.log('microtask'));\nconsole.log('end');\n// \u8f93\u51fa\uff1astart \u2192 end \u2192 microtask \u2192 timeout\n"})}),"\n",(0,l.jsx)(n.h4,{id:"\u793a\u4f8b\u907f\u514d\u5f3a\u5236\u540c\u6b65\u5e03\u5c40",children:"\u793a\u4f8b\uff1a\u907f\u514d\u5f3a\u5236\u540c\u6b65\u5e03\u5c40"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-js",children:"// \u8bfb\u5199\u5206\u79bb\uff1a\u907f\u514d\u4ea4\u66ff\u8bfb\u5199\u5bfc\u81f4\u591a\u6b21\u5e03\u5c40\nrequestAnimationFrame(() => {\n  const h = el.offsetHeight; // \u8bfb\n  el.style.height = (h + 10) + 'px'; // \u5199\n});\n"})})]})}function h(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,l.jsx)(n,{...e,children:(0,l.jsx)(d,{...e})}):d(e)}}}]);
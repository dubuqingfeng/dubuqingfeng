"use strict";(globalThis.webpackChunkdubuqingfeng=globalThis.webpackChunkdubuqingfeng||[]).push([[82940],{18649:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>a,contentTitle:()=>c,default:()=>h,frontMatter:()=>l,metadata:()=>i,toc:()=>o});var i=r(38847),d=r(74848),s=r(28453);const l={title:"Android Decompiler / \u521d\u63a2\u53cd\u7f16\u8bd1",description:"0x00 TOC \u539f\u7406 \u65e0\u6df7\u6dc6\u65e0\u52a0\u5bc6\u65e0\u52a0\u58f3 \u4ec5\u6df7\u6dc6 \u4ec5\u52a0\u5bc6 \u4ec5\u52a0\u58f3 \u81ea\u52a8\u5316\u5b9e\u73b0 \u4e00\u4e9b\u8f6f\u4ef6 \u53c2\u8003\u94fe\u63a5",date:"2016-06-25 17:24",updated:"2016-06-27 22:31",tags:["Android\u5b89\u5168","\u53cd\u7f16\u8bd1","Decompiler","\u6280\u672f"],excerpt:"\u672c\u6587\u5bf9 Android \u53cd\u7f16\u8bd1\u9886\u57df\u8fdb\u884c\u4e86\u7b80\u8981\u7684\u5206\u6790\uff0c\u5982\u4f55\u8fdb\u884c\u53cd\u7f16\u8bd1\uff0c\u4ee5\u53ca\u5982\u4f55\u6df7\u6dc6\u5982\u4f55\u52a0\u5bc6\u5982\u4f55\u52a0\u58f3\uff0c\u4ee5\u53ca\u5176\u5bf9\u7b56\uff0c\u8fdb\u884c\u4e86\u5b9e\u8df5\u548c\u63a2\u7d22\u3002",categories:"Android\u5b89\u5168",permalink:"201606-android-security-decompiler.html",author:"admin",toc:!0},c="0x00  TOC",a={authorsImageUrls:[void 0]},o=[];function t(e){const n={a:"a",code:"code",h1:"h1",li:"li",p:"p",pre:"pre",ul:"ul",...(0,s.R)(),...e.components};return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsx)(n.li,{children:"\u539f\u7406"}),"\n",(0,d.jsx)(n.li,{children:"\u65e0\u6df7\u6dc6\u65e0\u52a0\u5bc6\u65e0\u52a0\u58f3"}),"\n",(0,d.jsx)(n.li,{children:"\u4ec5\u6df7\u6dc6"}),"\n",(0,d.jsx)(n.li,{children:"\u4ec5\u52a0\u5bc6"}),"\n",(0,d.jsx)(n.li,{children:"\u4ec5\u52a0\u58f3"}),"\n",(0,d.jsx)(n.li,{children:"\u81ea\u52a8\u5316\u5b9e\u73b0"}),"\n",(0,d.jsx)(n.li,{children:"\u4e00\u4e9b\u8f6f\u4ef6"}),"\n",(0,d.jsx)(n.li,{children:"\u53c2\u8003\u94fe\u63a5"}),"\n"]}),"\n",(0,d.jsx)(n.h1,{id:"0x01--\u539f\u7406",children:"0x01  \u539f\u7406"}),"\n",(0,d.jsx)(n.p,{children:"\u9996\u5148\u5728\u9006\u5411\u9886\u57df\uff0c\u6709\u4e00\u4e2a\u662f\u9700\u8981\u533a\u522b\u7684\u3002\u5c31\u662f\u53cd\u6c47\u7f16\u548c\u53cd\u7f16\u8bd1\u3002"}),"\n",(0,d.jsx)(n.p,{children:"\u53cd\u6c47\u7f16\u628a\u7a0b\u5e8f\u7684\u539f\u59cb\u673a\u5668\u7801\uff0c\u7ffb\u8bd1\u6210\u8f83\u4fbf\u4e8e\u9605\u8bfb\u7406\u89e3\u7684\u6c47\u7f16\u4ee3\u7801\u3002\u6bd4\u5982IDA\u3001OD\u7b49\u3002"}),"\n",(0,d.jsx)(n.p,{children:"\u53cd\u7f16\u8bd1\uff0c\u901a\u5e38\u662f\u5c06\u673a\u5668\u7801(\u6c47\u7f16\u8bed\u8a00)\u8f6c\u6362\u4e3a\u9ad8\u7ea7\u7f16\u7a0b\u8bed\u8a00\u3002"}),"\n",(0,d.jsx)(n.p,{children:"\u7531\u4e8eJava\u3001.net\u8fd9\u6837\u7684\u57fa\u4e8e\u865a\u62df\u673a\u6280\u672f\u7684\u8bed\u8a00\u90fd\u662f\u91c7\u7528\u4e86ByteCode\u7684\u4e8c\u8fdb\u5236\u7ed3\u6784\uff0c\u56e0\u6b64\u5f88\u5bb9\u6613\u5c06ByteCode\u8f6c\u5316\u4e3a\u201c\u62bd\u8c61\u8bed\u6cd5\u6811\u201d\uff08\u7b80\u79f0AST\uff0c\u300a\u7f16\u8bd1\u539f\u7406\u300b\u8fd9\u95e8\u8bfe\u4e2d\u7684\u6982\u5ff5\uff09\uff0c\u7136\u540e\u91c7\u7528\u53cd\u7f16\u8bd1\u5668\u5c31\u53ef\u4ee5\u5c06AST\u8f6c\u6362\u4e3a\u4ee3\u7801\u4e86\u3002"}),"\n",(0,d.jsxs)(n.p,{children:["\u8be6\u7ec6\u53ef\u4ee5\u53c2\u8003\u4e4c\u4e91\u4e0a\u7684\u6587\u7ae0",(0,d.jsx)(n.a,{href:"http://drops.wooyun.org/papers/13686",children:"\u53cd\u7f16\u8bd1\u7cfb\u5217\u6559\u7a0b(\u4e0a)"})]}),"\n",(0,d.jsx)(n.p,{children:"#####0x02  \u65e0\u6df7\u6dc6\u65e0\u52a0\u5bc6\u65e0\u52a0\u58f3"}),"\n",(0,d.jsx)(n.p,{children:"\u4e00\u4e2aAndroid\u7a0b\u5e8f\uff0c\u5982\u679c\u6ca1\u6709\u8fdb\u884c\u6df7\u6dc6\uff0c\u52a0\u5bc6\uff0c\u52a0\u58f3\u7b49\u884c\u4e3a\u65f6\uff0c\u5982\u679c\u8fdb\u884c\u53cd\u7f16\u8bd1\u7684\u8bdd\uff0c\u662f\u53ef\u4ee5\u9006\u5411\u5230Java\u6e90\u7801\u7684\u3002"}),"\n",(0,d.jsxs)(n.p,{children:["1.",(0,d.jsx)(n.a,{href:"https://github.com/pxb1988/dex2jar",children:"Dex2Jar"}),"\u548c",(0,d.jsx)(n.a,{href:"https://github.com/java-decompiler/jd-gui",children:"JD-GUI"}),"(\u6216\u8005Jad)"]}),"\n",(0,d.jsxs)(n.p,{children:["\u5148\u901a\u8fc7Dex2Jar\u8f6f\u4ef6\u5c06",(0,d.jsx)(n.code,{children:"classes.dex"}),"\u8f6c\u6362\u4e3ajar\u6587\u4ef6\uff0c\u7136\u540e\u518d\u901a\u8fc7Java\u53cd\u7f16\u8bd1\u5de5\u5177JD-GUI\u5c06jar\u6587\u4ef6\u8f6c\u6362\u6210JAVA\u6e90\u6587\u4ef6\u3002"]}),"\n",(0,d.jsxs)(n.p,{children:["\u603b\u4e4b\u8fd9\u662f\u901a\u8fc7dex\u8f6cjar\uff0c\u7136\u540e\u518d\u8f6cjava\u6e90\u4ee3\u7801\u7684\u601d\u8def\u3002\u5176\u4e2ddex\u8f6cjar\u4e5f\u53ef\u4ee5\u9009\u62e9\u4e00\u4e9b\u5176\u4ed6\u8f6f\u4ef6\uff0c\u4f8b\u5982\u8c37\u6b4c\u5b98\u65b9\u7684",(0,d.jsx)(n.a,{href:"https://github.com/google/enjarify",children:"enjarify"}),"\u3002"]}),"\n",(0,d.jsx)(n.p,{children:"\u4e0b\u8f7dDex2Jar\u548cJd-gui\u7684\u5730\u5740\uff1a"}),"\n",(0,d.jsxs)(n.p,{children:["Dex2Jar:",(0,d.jsx)(n.a,{href:"https://github.com/pxb1988/dex2jar/releases",children:"https://github.com/pxb1988/dex2jar/releases"})]}),"\n",(0,d.jsxs)(n.p,{children:["JD-GUI:",(0,d.jsx)(n.a,{href:"http://jd.benow.ca/",children:"http://jd.benow.ca/"})]}),"\n",(0,d.jsx)(n.p,{children:"\u4f7f\u7528Dex2Jar\u548cJd-gui\u7684\u547d\u4ee4\uff1a"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{children:"dex2jar <file0>\n//\u5373\n./d2j-dex2jar.sh xxx.apk\njava -jar jd-gui-x.y.z.jar\n//\u6216\u8005\u662f\njava -classpath jd-gui-x.y.z.jar org.jd.gui.App\n//\u4e5f\u53ef\u4ee5\u76f4\u63a5\u8fd0\u884c\u5ba2\u6237\u7aef\n"})}),"\n",(0,d.jsx)(n.p,{children:"\u4ee5\u4e0b\u5373\u4e3a\u53cd\u6c47\u7f16\u51fa\u6765\u7684\u7ed3\u679c\u3002"}),"\n",(0,d.jsx)("img",{src:"https://dubuqingfeng.oss-cn-hongkong.aliyuncs.com/blog/tech/blog201606-android-security-decompiler-01.png",class:"responsive-img"}),"\n",(0,d.jsx)(n.p,{children:"2.APK\u6539\u4e4b\u7406\u3001APKDB\u3001Android\u9006\u5411\u52a9\u624b\u3001Android Killer\u4e4b\u7c7b\u8f6f\u4ef6"}),"\n",(0,d.jsx)(n.p,{children:"\u5b9e\u9645\u672c\u8d28\u4e0a\u8fd8\u662f\u901a\u8fc7Dex2jar\u6216\u8005apktool\u5de5\u5177\u7684\u5c01\u88c5\u3002"}),"\n",(0,d.jsx)(n.p,{children:"\u8fd8\u6709\u4e00\u4e2aJadx\u7684\u8f6f\u4ef6\u4e5f\u6bd4\u8f83\u597d\u7528\u3002"}),"\n",(0,d.jsx)("img",{src:"https://dubuqingfeng.oss-cn-hongkong.aliyuncs.com/blog/tech/blog201606-android-security-decompiler-02.png",class:"responsive-img"}),"\n",(0,d.jsx)(n.p,{children:"3.\u5728\u7ebf\u53cd\u7f16\u8bd1\u7f51\u7ad9"}),"\n",(0,d.jsxs)(n.p,{children:["\u5730\u5740\uff1a",(0,d.jsx)(n.a,{href:"http://www.decompileandroid.com/",children:"http://www.decompileandroid.com/"})]}),"\n",(0,d.jsxs)(n.p,{children:["\u5730\u5740\uff1a",(0,d.jsx)(n.a,{href:"http://www.ludaima.cn/android.html",children:"http://www.ludaima.cn/android.html"})]}),"\n",(0,d.jsx)(n.p,{children:"\u53ea\u9700\u8981\u4e0a\u4f20\u9700\u8981\u53cd\u7f16\u8bd1\u7684apk\uff0c\u7a0d\u7b49\u7247\u523b\uff0c\u5373\u53ef\u4e0b\u8f7d\u6e90\u7801\u3002"}),"\n",(0,d.jsxs)(n.p,{children:["4.smali\u548cBaksmali\u4ee5\u53ca",(0,d.jsx)(n.a,{href:"http://blog.avlyun.com/show/%E3%80%8Asv%E7%94%A8%E6%88%B7%E6%8C%87%E5%8D%97%E3%80%8B/",children:"Smali Viewer"})]}),"\n",(0,d.jsx)(n.p,{children:"smali\u662f\u5c06smali\u6587\u4ef6\u8f6c\u6362\u6210dex\u3002"}),"\n",(0,d.jsx)(n.p,{children:"Baksmali\u548csmali\u76f8\u53cd\uff0c\u5c06dex\u8f6c\u6362\u6210smali\u3002"}),"\n",(0,d.jsxs)(n.p,{children:["\u5728",(0,d.jsx)(n.a,{href:"https://www.quora.com/What-is-smali-in-Android",children:"Quora\u7684\u4e00\u7bc7\u95ee\u7b54"}),"\u4e2d\uff0c\u4ecb\u7ecd\u4e86smali\u548cbaksmali\u7684\u4f5c\u7528\u3002"]}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{children:'Smali/Baksmali is an assembler/disassembler for the dex format used by dalvik,\n Android\'s Java VM implementation. The names "Smali" and "Baksmali" are the\n  Icelandic equivalents of "assembler" and "disassembler" respectively.\n'})}),"\n",(0,d.jsx)(n.h1,{id:"0x03--\u4ec5\u6df7\u6dc6",children:"0x03  \u4ec5\u6df7\u6dc6"}),"\n",(0,d.jsx)(n.p,{children:"\u901a\u5e38Android\u6df7\u6dc6\u65b9\u6cd5\uff0c\u6709ProGuard\u3001DexGuard\u548cAPKfuscator\u7b49\u3002"}),"\n",(0,d.jsx)(n.p,{children:"\u600e\u6837\u4f7f\u7528ProGuard\u5bf9Android\u9879\u76ee\u6e90\u7801\u8fdb\u884c\u6df7\u6dc6\u4fdd\u62a4\uff0c\u5728Android Studio\u4e2dbuild.gradle\uff0c\u4fee\u6539\u4ee5\u4e0b\u4ee3\u7801\u7247\u6bb5"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-java",children:"release {\n    minifyEnabled true\n    proguardFiles getDefaultProguardFile('proguard-android-optimize.txt'),\n     'proguard-rules.pro'\n}\n"})}),"\n",(0,d.jsxs)(n.p,{children:["\u5c06",(0,d.jsx)(n.code,{children:"minifyEnabled"}),"\u6539\u4e3atrue\u3002\u53bb\u9664\u65e0\u6548\u8d44\u6e90\u7684\u8bdd\u9700\u8981\u6dfb\u52a0",(0,d.jsx)(n.a,{href:"http://tools.android.com/tech-docs/new-build-system/resource-shrinking",children:(0,d.jsx)(n.code,{children:"shrinkResources true"})}),"\u3002"]}),"\n",(0,d.jsxs)(n.p,{children:["\u7136\u540e\u5728",(0,d.jsx)(n.code,{children:"proguard-rules.pro"}),"\u6587\u4ef6\u4e2d\uff0c\u7f16\u5199\u4e00\u4e9b\u7279\u5b9a\u6846\u67b6\u7684\u6df7\u6dc6\u89c4\u5219\u3002"]}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{children:"# ProGuard configurations for Bugtags\n-keepattributes LineNumberTable,SourceFile\n\n-keep class com.bugtags.library.** {*;}\n-dontwarn org.apache.http.**\n-dontwarn android.net.http.AndroidHttpClient\n-dontwarn com.bugtags.library.**\n# End Bugtags\n\n# retrofit\n-dontwarn retrofit2.**\n-keep class retrofit2.** { *; }\n-keepattributes Signature\n-keepattributes Exceptions\n\n# android-async-http\n-dontwarn android-async-http-1.4.9.jar.**\n-keep class android-async-http-1.4.9.jar.**{*;}\n-keep class org.apache.http.** {*; }\n"})}),"\n",(0,d.jsx)(n.p,{children:"\u5e76\u4e14\u6df7\u6dc6\u65f6\u9700\u8981\u5bf9\u4f7f\u7528\u7684\u6846\u67b6\u8fdb\u884c\u6df7\u6dc6\uff0c\u6216\u8005\u662f\u907f\u514d\u6df7\u6dc6\u4e00\u4e9b\u7c7b\u3002\u8fd9\u65f6\u5c31\u5bf9\u6846\u67b6\u7684\u6587\u6863\u8fdb\u884c\u9605\u8bfb\uff0c\u5206\u6790\u9700\u8981\u589e\u52a0\u7684\u6df7\u6dc6\u89c4\u5219\u3002"}),"\n",(0,d.jsx)(n.p,{children:"\u6df7\u6dc6\u7684\u6548\u679c\u5982\u4e0b\u56fe\u6240\u793a\u3002"}),"\n",(0,d.jsx)("img",{src:"https://dubuqingfeng.oss-cn-hongkong.aliyuncs.com/blog/tech/blog201606-android-security-decompiler-03.png",class:"responsive-img"}),"\n",(0,d.jsx)(n.p,{children:"\u4ee5\u53ca\u52a0\u901fgradle\u7f16\u8bd1\u7684\u914d\u7f6e\uff1a"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{children:"org.gradle.daemon=true\norg.gradle.jvmargs=-Xmx2048m -XX:MaxPermSize=512m -XX:\n+HeapDumpOnOutOfMemoryError -Dfile.encoding=UTF-8\norg.gradle.parallel=true\norg.gradle.configureondemand=true\n"})}),"\n",(0,d.jsx)(n.p,{children:"\u5982\u4f55\u5bf9\u6297\u8fd9\u79cd\u6df7\u6dc6\u5462\uff1f\u8fd9\u79cd\u6df7\u6dc6\u4ec5\u4ec5\u662f\u589e\u5927\u4e86\u9605\u8bfb\u96be\u5ea6\uff0c\u5728\u53cd\u6c47\u7f16\u4e4b\u540e\uff0c\u7c7b\u540d\u53d8\u6210\u4e86a,b,c\u4e4b\u7c7b\u7684\u3002"}),"\n",(0,d.jsxs)(n.p,{children:["dex2jar\u4f5c\u8005\u5728",(0,d.jsx)(n.a,{href:"http://secwiki.neu.edu.cn/wiki/images/e/eb/Android%E6%B7%B7%E6%B7%86%E6%8A%80%E5%B7%A7%E4%B8%8E%E5%8F%8D%E6%B7%B7%E6%B7%86_%E5%B0%8F%E6%B3%A2.pdf",children:"Android\u6df7\u6dc6\u6280\u5de7\u4e0e\u53cd\u6df7\u6dc6"}),"\u4e2d\u8c08\u5230\uff0cProGuard\u6709Shrinking\u3001Optimization\u3001Name Obfuscation\u3001Removal of logging code\u7b49\u529f\u80fd\u3002\u5728\u9762\u5bf9\u540d\u5b57\u66ff\u6362\u65f6\uff0c\u6709\u9605\u8bfb\u6e90\u4ee3\u7801\u3001JEB\u3001ProGuard\u5206\u6790\u7b49\u65b9\u6cd5\uff0cFlanker\u5927\u725b\u4e5f\u5206\u4eab\u8fc7\u5229\u7528",(0,d.jsx)(n.a,{href:"http://drops.wooyun.org/mobile/6665",children:"JEB API\u7f16\u5199\u63d2\u4ef6\u5206\u6790"}),"\u3002"]}),"\n",(0,d.jsxs)(n.p,{children:["\u9ed8\u8ba4\u7684\u6df7\u6dc6\u89c4\u5219\u5728",(0,d.jsx)(n.a,{href:"https://android.googlesource.com/platform/sdk/+/master/files/proguard-android.txt",children:"proguard-android.txt"}),"\u3002"]}),"\n",(0,d.jsx)(n.p,{children:"\u53ef\u4ee5\u4f7f\u7528Proguard\u518d\u6df7\u6dc6\u4e00\u6b21\uff0c\u5229\u7528\u81ea\u5df1\u5199\u7684\u89c4\u5219Mapping\u6587\u4ef6\u3002"}),"\n",(0,d.jsx)(n.p,{children:"\u8fd9\u91cc\u4ee5\u4e00\u4e2a\u6587\u4ef6\u4e3a\u4f8b\u3002\u8fdb\u884cProguard\u7684\u6df7\u6dc6\u4ee5\u53ca\u53cd\u6df7\u6dc6\u3002"}),"\n",(0,d.jsx)(n.p,{children:"\u5728Proguard\u914d\u7f6e\u6587\u4ef6\u4e2d\uff0c\u6dfb\u52a0\u5982\u4e0b\u8bed\u53e5\uff0c\u53ef\u6253\u5370\u51fa\u9ed8\u8ba4\u6df7\u6dc6\u89c4\u5219\u7684Mapping\u6587\u4ef6\u3002"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{children:"-printmapping mapping.txt\n"})}),"\n",(0,d.jsx)(n.p,{children:"\u5728\u4fee\u6539\u597d\u5bf9\u5e94\u7684\u503c\u4ee5\u540e\uff0c\u5229\u7528\u4ee5\u4e0b\u8bed\u53e5\uff0c\u5e94\u7528Mapping\u6587\u4ef6\uff0c\u518d\u5efa\u4e00\u4e2a\u9879\u76ee\uff0c\u5206\u6790\u5bf9\u5e94\u7684\u4ee3\u7801\u3002"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{children:"-applymapping mapping.txt\n"})}),"\n",(0,d.jsx)(n.p,{children:"\u6700\u540e\u7ed3\u679c\u5982\u4e0b\uff1a"}),"\n",(0,d.jsx)("img",{src:"https://dubuqingfeng.oss-cn-hongkong.aliyuncs.com/blog/tech/blog201606-android-security-decompiler-04.png",class:"responsive-img"}),"\n",(0,d.jsx)("img",{src:"https://dubuqingfeng.oss-cn-hongkong.aliyuncs.com/blog/tech/blog201606-android-security-decompiler-05.png",class:"responsive-img"}),"\n",(0,d.jsx)(n.p,{children:"\u8fd9\u6837\u53cd\u6df7\u6dc6\u4e86\u4ee5\u540e\uff0c\u964d\u4f4e\u4e86\u4ee3\u7801\u9605\u8bfb\u7684\u96be\u5ea6\uff0c\u589e\u52a0\u4e86\u5e94\u7528\u88ab\u7834\u89e3\u7684\u98ce\u9669\u3002"}),"\n",(0,d.jsx)(n.h1,{id:"0x04--\u4ec5\u52a0\u5bc6",children:"0x04  \u4ec5\u52a0\u5bc6"}),"\n",(0,d.jsx)(n.p,{children:"\u52a0\u5bc6\u65b9\u5f0f\u6709\u5f88\u591a\u79cd\uff0c\u672c\u6587\u4e0d\u80fd\u9762\u9762\u4ff1\u5230\uff0c\u53ea\u80fd\u627e\u51fa\u4e00\u4e9b\u5178\u578b\u7684\u3002\u6bd4\u5982\u6709\u6d41\u7a0b\u6df7\u6392\u52a0\u5bc6\u3001\u4ee3\u7801\u5185\u90e8\u5b57\u7b26\u4e32\u52a0\u5bc6\uff0c\u5bf9so\u6e90\u7801\u3001so\u51fd\u6570\u540d\u79f0\u4ee5\u53ca\u63a5\u53e3\u8c03\u7528\u8fdb\u884c\u52a0\u5bc6\u9690\u85cf\uff0c\u5bf9classes.dex\u4e2d\u7684\u6240\u6709\u51fd\u6570\u529f\u80fd\u4ee3\u7801\u8fdb\u884c\u63d0\u53d6\uff0c\u7136\u540e\u52a0\u5bc6\u5355\u72ec\u5b58\u653e\u7b49\u3002"}),"\n",(0,d.jsx)(n.p,{children:"\u5f53\u7136\u5982\u679c\u9762\u9762\u4ff1\u5230\uff0c\u6587\u7ae0\u7bc7\u5e45\u5c31\u6bd4\u8f83\u957f\u4e86\uff0c\u5e76\u4e14\u5b9e\u8df5\u3001\u7814\u7a76\u82b1\u8d39\u7684\u65f6\u95f4\u4e5f\u6bd4\u8f83\u591a\u3002\u8fd9\u91cc\u5c31\u4e3e\u6bd4\u8f83\u7b80\u5355\u7684\u4f8b\u5b50\u3002"}),"\n",(0,d.jsx)(n.p,{children:"Android\u7b7e\u540d\u6821\u9a8c\uff1a"}),"\n",(0,d.jsx)(n.p,{children:"\u5728android\u7a0b\u5e8f\u4e2d\uff0c\u53ef\u4ee5\u4f7f\u7528\u4ee5\u4e0b\u4ee3\u7801\u8fdb\u884c\u7b7e\u540d\u7684\u83b7\u53d6\u3002"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-java",children:"public int getSignature(String packageName) {\n    PackageManager pm = this.getPackageManager();\n    PackageInfo pi = null;\n    int sig = 0;\n    try {\n        pi = pm.getPackageInfo(packageName, PackageManager.GET_SIGNATURES);\n        Signature[] s = pi.signatures;\n        sig = s[0].hashCode();\n    } catch (Exception e1) {\n        sig = 0;\n        e1.printStackTrace();\n    }\n    return sig;\n}\n"})}),"\n",(0,d.jsx)(n.p,{children:"\u53ef\u4ee5\u5728APP\u6bcf\u6b21\u8bbf\u95ee\u670d\u52a1\u5668\u7684\u65f6\u5019\uff0c\u643a\u5e26\u4e0a\u5f53\u524dAPP\u7684\u7b7e\u540d\uff0c\u670d\u52a1\u7aef\u505a\u4e2a\u7b7e\u540d\u9a8c\u8bc1\uff0c\u5982\u679c\u4e0d\u5bf9\uff0c\u76f4\u63a5\u4e0d\u901a\u8fc7\uff0c\u8fd4\u56de\u5ba2\u6237\u7aef\u4fe1\u606f\uff0c\u7136\u540e\u5ba2\u6237\u7aef\u8fdb\u884c\u4e00\u5b9a\u7684\u5904\u7406\u3002\u5f53\u7136\u8fd9\u6837\u7684\u8bdd\u7834\u89e3\u8005\u4e5f\u53ef\u4ee5\u901a\u8fc7\u6293\u5305\u7684\u65b9\u5f0f\uff0c\u6293\u53d6\u5230\u7b7e\u540d\u9a8c\u8bc1\u7684\u5305\uff0c\u7136\u540e\u6bcf\u6b21\u901a\u4fe1\u65f6\u4fee\u6539\u5bf9\u5e94\u7684\u5305\u5373\u53ef\u3002"}),"\n",(0,d.jsx)(n.h1,{id:"0x05--\u4ec5\u52a0\u58f3",children:"0x05  \u4ec5\u52a0\u58f3"}),"\n",(0,d.jsxs)(n.p,{children:["so\u52a0\u58f3\uff0cupx\u662f\u6700\u4e3aso\u52a0\u58f3\u7684\u9996\u9009\uff0c\u4ee5\u524d\u5728PC\u7aef\u4e5f\u505a\u8fc7",(0,d.jsx)(n.a,{href:"http://qingfeng520.blog.51cto.com/7098444/1256106",children:"upx\u7684\u8131\u58f3"}),"\u3002"]}),"\n",(0,d.jsx)(n.p,{children:"\u8fd9\u91cc\u505a\u4e2a\u793a\u4f8b\uff0c\u52a0\u58f3so\u3002"}),"\n",(0,d.jsx)(n.p,{children:"\u5728\u524d\u4e00\u7bc7\u6587\u7ae0\u91cc\uff0c\u6d89\u53ca\u5230\u4e86\u5982\u4f55\u5728so\u91cc\u6253log\u6587\u4ef6\u3002\u5728\u5199\u597djni\u4ee3\u7801\u4e86\u4ee5\u540e\uff0c\u5c06so\u6587\u4ef6\u590d\u5236\u51fa\u6765\u3002"}),"\n",(0,d.jsx)(n.p,{children:"\u7136\u540e\u6dfb\u52a0\u5230\u6587\u4ef6\u5939\u91cc\uff0c\u5982\u4e0b\u56fe\u6240\u793a\u3002"}),"\n",(0,d.jsx)("img",{src:"https://dubuqingfeng.oss-cn-hongkong.aliyuncs.com/blog/tech/blog201606-android-security-decompiler-06.png",class:"responsive-img"}),"\n",(0,d.jsx)(n.p,{children:"\u51c6\u5907UPX\u58f3\u7f16\u8bd1\u73af\u5883\uff1a"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{children:"zlib-1.2.8.tar.gz\nucl-1.03.tar.gz\nlzma443.tar.bz2\nupx-hg-68db2e569c63.tar.gz\n"})}),"\n",(0,d.jsx)(n.p,{children:"\u7f16\u8bd1\u5b89\u88c5:"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{children:"cd ucl-1.03\n./configure --prefix=$PWD/../../upx-hg-6cd5982ece4f/build\nmake\ncd zlib-1.2.8\n./configure --prefix=$PWD/../../upx-hg-6cd5982ece4f/build\nmake\nvi .bash_profile\n"})}),"\n",(0,d.jsx)(n.p,{children:"\u8bbe\u7f6e\u73af\u5883\u53d8\u91cf\u3002"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{children:"export UPX_UCLDIR=/Users/qingfeng/software/upx/libs/ucl-1.03\nexport UPX_ZLIBDIR=/Users/qingfeng/software/upx/libs/zlib-1.2.8\nexport UPX_LZMADIR=/Users/qingfeng/software/upx/libs/lzma443\nexport UPX_LZMA_VERSION=0x443\nexport UPX_DIR=/Users/qingfeng/software/upx/upx-hg-68db2e569c63\n"})}),"\n",(0,d.jsxs)(n.p,{children:["\u67e5\u770b\u73af\u5883\u53d8\u91cf\u7684\u547d\u4ee4env\uff0c\u5e94\u7528\u73af\u5883\u53d8\u91cf\u7684\u547d\u4ee4",(0,d.jsx)(n.code,{children:"source .bash_profile"}),"\u3002"]}),"\n",(0,d.jsxs)(n.p,{children:["\u7136\u540e\u5728\u7f16\u8bd1",(0,d.jsx)(n.code,{children:"make all"}),"\u7684\u8fc7\u7a0b\u4e2d\uff0c\u9047\u5230\u4e86\u4ee5\u4e0b\u7684\u9519\u8bef\u3002"]}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{children:"./bele_policy.h:156:9: error: unused typedef 'acc_cta_t__39' [-Werror,-Wunused-local-typedef]\n        COMPILE_TIME_ASSERT(sizeof(U16) == 2)\n        ^\n./conf.h:359:34: note: expanded from macro 'COMPILE_TIME_ASSERT'\n#define COMPILE_TIME_ASSERT(e)   ACC_COMPILE_TIME_ASSERT(e)\n./miniacc.h:1563:54: note: expanded from macro 'ACC_COMPILE_TIME_ASSERT'\n#    define ACC_COMPILE_TIME_ASSERT(e)  {typedef int __ACC_CTA_NAME(acc_cta_t__)[1-2*!(e)];}\n./miniacc.h:1531:37: note: expanded from macro '__ACC_CTA_NAME'\n#  define __ACC_CTA_NAME(a)         ACC_PP_ECONCAT2(a,__COUNTER__)\n./miniacc.h:331:41: note: expanded from macro 'ACC_PP_ECONCAT2'\n#define ACC_PP_ECONCAT2(a,b)            ACC_PP_CONCAT2(a,b)\n./miniacc.h:325:41: note: expanded from macro 'ACC_PP_CONCAT2'\n#define ACC_PP_CONCAT2(a,b)             a ## b\n<scratch space>:183:1: note: expanded from here\nacc_cta_t__39\n"})}),"\n",(0,d.jsx)(n.p,{children:"\u65e0\u8bba\u662fupx\u662f3.9.1\uff0c\u8fd8\u662f\u6700\u65b0\u7248\uff0c\u65e0\u8bbalzma\u662f443\u7248\u672c\u8fd8\u662f\u6700\u65b0\u72481610\uff0c\u7f16\u8bd1\u7684\u65f6\u5019\u90fd\u4f1a\u51fa\u73b0\u8fd9\u4e2a\u95ee\u9898"}),"\n",(0,d.jsx)(n.p,{children:"\u7136\u540e\u8bd5\u7740\u5347\u7ea7\u4e86\u4e00\u4e0bg++\u7684\u7248\u672c\uff0cmac\u81ea\u5e26\u7684\u662f4.2\u7248\u672c\uff0c\u7528brew\u5347\u7ea7\u5230\u4e864.8\uff0c\u7136\u540e\u7528zsh\u7684alias\u529f\u80fd\uff08vi .zshrc\uff09\u5c06\u81ea\u5e26\u7684\u66ff\u6362\u6389\uff0c\u7136\u540e\u518d\u7f16\u8bd1\u8fd8\u662f\u4e0d\u884c\uff0c\u6700\u540e\u8fd8\u662f\u4f7f\u7528ubuntu\u8fdb\u884c\u7f16\u8bd1\u5427\u3002"}),"\n",(0,d.jsxs)(n.p,{children:["\u7136\u540e\u5c31\u4e0b\u4e86\u4e00\u4e2a16.04\u7684\u955c\u50cf\uff0c\u7136\u540e\u8dd1\u8d77\u4e86\u865a\u62df\u673a\uff0c\u4e0b\u8f7d\u5e76",(0,d.jsx)(n.a,{href:"http://www.chinapyg.com/thread-77929-1-1.html",children:"\u7f16\u8bd1\u90a3\u4e9b\u4f9d\u8d56"}),"\uff0c\u7136\u540e\u5728upx\u76ee\u5f55\u4e0b",(0,d.jsx)(n.code,{children:"make all"}),"\u7684\u8fc7\u7a0b\u4e2d\uff0c\u51fa\u73b0\u4e86\u4ee5\u4e0b\u7684\u95ee\u9898\uff1a"]}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{children:"compress.cpp:32:18: fatal error: zlib.h: No such file or directory\n     #include <zlib.h>\n"})}),"\n",(0,d.jsxs)(n.p,{children:["\u6ca1\u627e\u5230",(0,d.jsx)(n.code,{children:"zlib.h"}),"\uff0c\u53ef\u662f\u81ea\u5df1\u5728zlib\u90a3\u4e5f",(0,d.jsx)(n.code,{children:"make"}),"\u4e86\u554a\uff0c\u5728\u67e5\u627e\u8d44\u6599\u7684\u8fc7\u7a0b\u4e2d\uff0c\u8bd5\u7740\u5728zlib\u76ee\u5f55",(0,d.jsx)(n.code,{children:"make install"}),"\u4e86\u4e00\u4e0b\uff0c\u7136\u540e\u5c31\u7f16\u8bd1\u5b8c\u6210\u4e86\uff0c\u5728src\u76ee\u5f55\u4e0b\u4e5f\u6709",(0,d.jsx)(n.code,{children:"./upx.out"}),"\u4e86\uff0c\u7248\u672c\u662f3.9.2\u3002"]}),"\n",(0,d.jsx)(n.p,{children:"\u8fd9\u4e2a\u65f6\u5019\u5c31\u5e94\u8be5\u8003\u8651so\u7684init\u6bb5\u7684\u95ee\u9898\u4e86\u3002\u636e\u8fd9\u7bc7\u6587\u7ae0\u8bf4\uff0c\u52a0\u58f3\u7684\u6587\u4ef6\u4e2d\u9700\u8981\u6709INIT\u6bb5\uff0c\u6dfb\u52a0init\u6bb5\u7684\u4ee3\u7801\u5982\u4e0b\uff1a"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-C++",children:'void _init(void){} \\\\c++\nextern "C" {void _init(void){}}    \\\\c\n'})}),"\n",(0,d.jsx)(n.p,{children:"\u7136\u540e\u52a0\u58f3\u7684\u547d\u4ee4\u5982\u4e0b\uff1a"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{children:"./upx.out -f -o libdemo_upx.so libdemo.so\n"})}),"\n",(0,d.jsx)(n.p,{children:"\u7136\u540e\u8131\u58f3\u81ea\u7136-d\u53c2\u6570\u5373\u53ef\uff0c\u9700\u8981\u5224\u65ad\u6807\u5fd7\u662f\u5426\u4e3aUPX!\uff0c\u4ee5\u53ca\u5904\u7406\u53d8\u5f62\u7b49\u95ee\u9898\uff0c\u8131\u5b8c\u58f3\u5c31\u53ef\u4ee5\u4f7f\u7528IDA\u8fdb\u884candroid\u7684so\u5206\u6790\u4e86\u3002"}),"\n",(0,d.jsx)(n.h1,{id:"0x06--\u81ea\u52a8\u5316\u5b9e\u73b0",children:"0x06  \u81ea\u52a8\u5316\u5b9e\u73b0"}),"\n",(0,d.jsx)(n.p,{children:"\u5982\u4f55\u5b9e\u73b0\u4e00\u4e9b\u81ea\u52a8\u5316\u811a\u672c\uff0c\u8fdb\u884c\u53cd\u6c47\u7f16\u7684\u8fd8\u539f\u5de5\u4f5c\u3002"}),"\n",(0,d.jsxs)(n.p,{children:["\u5f53\u7136\u7f51\u4e0a\u5df2\u7ecf\u6709\u4eba\u5b9e\u73b0\u8fc7\u76f8\u5173\u5185\u5bb9\uff0c\u6bd4\u5982Mac\u4e0b\u7684",(0,d.jsx)(n.a,{href:"https://github.com/dirkvranckaert/AndroidDecompiler",children:"AndroidDecompiler"}),"\uff0c\u6216\u8005\u662f",(0,d.jsx)(n.a,{href:"https://github.com/luckyandyzhang/easy-android-decompiler",children:"easy-android-decompiler"}),"\u3002"]}),"\n",(0,d.jsx)(n.h1,{id:"0x07--\u4e00\u4e9b\u8f6f\u4ef6",children:"0x07  \u4e00\u4e9b\u8f6f\u4ef6"}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsx)(n.li,{children:"Baksmali \u548c Dedexer"}),"\n",(0,d.jsx)(n.li,{children:"apktool"}),"\n",(0,d.jsx)(n.li,{children:"JEB"}),"\n",(0,d.jsx)(n.li,{children:"jadx"}),"\n",(0,d.jsx)(n.li,{children:"jdgui"}),"\n"]}),"\n",(0,d.jsx)(n.p,{children:"DEX\u8f6cjar\uff1a"}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsx)(n.li,{children:"enjarify"}),"\n",(0,d.jsx)(n.li,{children:"dex2jar"}),"\n"]}),"\n",(0,d.jsx)(n.p,{children:"app\u8c03\u8bd5\u5668\uff1a"}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsx)(n.li,{children:(0,d.jsx)(n.a,{href:"http://gikir.com/product.php",children:"gikdbg"})}),"\n"]}),"\n",(0,d.jsx)(n.p,{children:"\u4ee3\u7801\u6df7\u6dc6\u8f6f\u4ef6\uff1a"}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsx)(n.li,{children:"Proguard"}),"\n",(0,d.jsx)(n.li,{children:"DashO"}),"\n",(0,d.jsx)(n.li,{children:"Dexguard"}),"\n",(0,d.jsx)(n.li,{children:"DexProtector"}),"\n",(0,d.jsx)(n.li,{children:"ApkProtect"}),"\n",(0,d.jsx)(n.li,{children:"Shield4j"}),"\n",(0,d.jsx)(n.li,{children:"Stringer"}),"\n",(0,d.jsx)(n.li,{children:"Allitori"}),"\n"]}),"\n",(0,d.jsx)(n.p,{children:"\u5bf9\u6297\u6df7\u6dc6\uff1a"}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsx)(n.li,{children:(0,d.jsx)(n.a,{href:"https://github.com/CalebFenton/dex-oracle",children:"dex-oracle"})}),"\n",(0,d.jsx)(n.li,{children:(0,d.jsx)(n.a,{href:"https://github.com/CalebFenton/simplify",children:"simplify"})}),"\n",(0,d.jsx)(n.li,{children:(0,d.jsx)(n.a,{href:"https://github.com/konloch/bytecode-viewer",children:"bytecode-viewer"})}),"\n"]}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.a,{href:"https://github.com/Juude/droidReverse",children:"\u9006\u5411\u5de5\u7a0b\u96c6"})}),"\n",(0,d.jsx)(n.h1,{id:"0x08--\u53c2\u8003\u94fe\u63a5",children:"0x08  \u53c2\u8003\u94fe\u63a5"}),"\n",(0,d.jsx)(n.p,{children:"\u5f53\u7136\u5b9e\u9645\u60c5\u51b5\u662f\u6df7\u6dc6\uff0c\u52a0\u5bc6\uff0c\u52a0\u58f3\u7efc\u5408\u8d77\u6765\u7684\uff0c\u5b9e\u9645\u60c5\u51b5\u8981\u5177\u4f53\u5206\u6790\u3002"}),"\n",(0,d.jsx)(n.p,{children:"\u53c2\u8003\u94fe\u63a5\uff1a"}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.a,{href:"http://drops.wooyun.org/tips/2871",children:"\u4e00\u6b21app\u6293\u5305\u5f15\u53d1\u7684Android\u5206\u6790\u8bb0\u5f55"})}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.a,{href:"http://kiya.space/2015/11/12/Android-security-tools/",children:"Android \u5b89\u5168\u5de5\u5177\u5305\uff08\u6301\u7eed\u66f4\u65b0\uff09"})}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.a,{href:"http://blog.csdn.net/guolin_blog/article/details/49738023",children:"Android\u5b89\u5168\u653b\u9632\u6218\uff0c\u53cd\u7f16\u8bd1\u4e0e\u6df7\u6dc6\u6280\u672f\u5b8c\u5168\u89e3\u6790"})}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.a,{href:"http://drops.wooyun.org/mobile/12172",children:"Android\u5e94\u7528\u5b89\u5168\u5f00\u53d1\u4e4b\u6e90\u7801\u5b89\u5168"})}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.a,{href:"http://www.wjdiankong.cn/blog/android%E9%80%86%E5%90%91%E4%B9%8B%E6%97%85-%E5%8F%8D%E7%BC%96%E8%AF%91%E5%88%A9%E5%99%A8apktool%E5%92%8Cjadx%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90%E4%BB%A5%E5%8F%8A%E9%94%99%E8%AF%AF%E7%BA%A0/",children:"Android\u9006\u5411\u4e4b\u65c5\u2014\u53cd\u7f16\u8bd1\u5229\u5668Apktool\u548cJadx\u6e90\u7801\u5206\u6790\u4ee5\u53ca\u9519\u8bef\u7ea0\u6b63"})})]})}function h(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,d.jsx)(n,{...e,children:(0,d.jsx)(t,{...e})}):t(e)}},28453:(e,n,r)=>{r.d(n,{R:()=>l,x:()=>c});var i=r(96540);const d={},s=i.createContext(d);function l(e){const n=i.useContext(s);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(d):e.components||d:l(e.components),i.createElement(s.Provider,{value:n},e.children)}},38847:e=>{e.exports=JSON.parse('{"permalink":"/blog/201606-android-security-decompiler","source":"@site/blog/201606-android-security-decompiler.md","title":"Android Decompiler / \u521d\u63a2\u53cd\u7f16\u8bd1","description":"0x00 TOC \u539f\u7406 \u65e0\u6df7\u6dc6\u65e0\u52a0\u5bc6\u65e0\u52a0\u58f3 \u4ec5\u6df7\u6dc6 \u4ec5\u52a0\u5bc6 \u4ec5\u52a0\u58f3 \u81ea\u52a8\u5316\u5b9e\u73b0 \u4e00\u4e9b\u8f6f\u4ef6 \u53c2\u8003\u94fe\u63a5","date":"2016-06-25T17:24:00.000Z","tags":[{"inline":true,"label":"Android\u5b89\u5168","permalink":"/blog/tags/android\u5b89\u5168"},{"inline":true,"label":"\u53cd\u7f16\u8bd1","permalink":"/blog/tags/\u53cd\u7f16\u8bd1"},{"inline":true,"label":"Decompiler","permalink":"/blog/tags/decompiler"},{"inline":true,"label":"\u6280\u672f","permalink":"/blog/tags/\u6280\u672f"}],"readingTime":9.82,"hasTruncateMarker":false,"authors":[{"name":"admin","key":null,"page":null}],"frontMatter":{"title":"Android Decompiler / \u521d\u63a2\u53cd\u7f16\u8bd1","description":"0x00 TOC \u539f\u7406 \u65e0\u6df7\u6dc6\u65e0\u52a0\u5bc6\u65e0\u52a0\u58f3 \u4ec5\u6df7\u6dc6 \u4ec5\u52a0\u5bc6 \u4ec5\u52a0\u58f3 \u81ea\u52a8\u5316\u5b9e\u73b0 \u4e00\u4e9b\u8f6f\u4ef6 \u53c2\u8003\u94fe\u63a5","date":"2016-06-25 17:24","updated":"2016-06-27 22:31","tags":["Android\u5b89\u5168","\u53cd\u7f16\u8bd1","Decompiler","\u6280\u672f"],"excerpt":"\u672c\u6587\u5bf9 Android \u53cd\u7f16\u8bd1\u9886\u57df\u8fdb\u884c\u4e86\u7b80\u8981\u7684\u5206\u6790\uff0c\u5982\u4f55\u8fdb\u884c\u53cd\u7f16\u8bd1\uff0c\u4ee5\u53ca\u5982\u4f55\u6df7\u6dc6\u5982\u4f55\u52a0\u5bc6\u5982\u4f55\u52a0\u58f3\uff0c\u4ee5\u53ca\u5176\u5bf9\u7b56\uff0c\u8fdb\u884c\u4e86\u5b9e\u8df5\u548c\u63a2\u7d22\u3002","categories":"Android\u5b89\u5168","permalink":"201606-android-security-decompiler.html","author":"admin","toc":true},"unlisted":false,"prevItem":{"title":"\u5982\u4f55\u9ad8\u6548\u7684\u5b66\u4e60\uff08\u4e3b\u8981\u8fd8\u662f\u6001\u5ea6\uff09\uff1f","permalink":"/blog/201606-ruhegaoxiaodexuexi"},"nextItem":{"title":"LogCat \u53ca Log \u7684\u4e00\u4e9b\u601d\u8003","permalink":"/blog/201606-android-security-logcat-log-thinks"}}')}}]);
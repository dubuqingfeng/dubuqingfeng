"use strict";(globalThis.webpackChunkdubuqingfeng=globalThis.webpackChunkdubuqingfeng||[]).push([[1207],{28453:(e,s,n)=>{n.d(s,{R:()=>l,x:()=>a});var i=n(96540);const r={},c=i.createContext(r);function l(e){const s=i.useContext(c);return i.useMemo(function(){return"function"==typeof e?e(s):{...s,...e}},[s,e])}function a(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:l(e.components),i.createElement(c.Provider,{value:s},e.children)}},83660:(e,s,n)=>{n.r(s),n.d(s,{assets:()=>t,contentTitle:()=>a,default:()=>h,frontMatter:()=>l,metadata:()=>i,toc:()=>o});const i=JSON.parse('{"id":"Wiki/blockchain/ethereum/gas/gas","title":"gas","description":"Gas \u8ba1\u8d39\u3001\u9000\u6b3e\u4e0e BaseFee\uff08EIP-1559/2929/3529\uff09","source":"@site/docs/Wiki/blockchain/ethereum/gas/gas.md","sourceDirName":"Wiki/blockchain/ethereum/gas","slug":"/Wiki/blockchain/ethereum/gas/","permalink":"/docs/Wiki/blockchain/ethereum/gas/","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"precompiles","permalink":"/docs/Wiki/blockchain/ethereum/evm/precompiles"},"next":{"title":"opcode-costs","permalink":"/docs/Wiki/blockchain/ethereum/gas/opcode-costs"}}');var r=n(74848),c=n(28453);const l={},a=void 0,t={},o=[{value:"Gas \u8ba1\u8d39\u3001\u9000\u6b3e\u4e0e BaseFee\uff08EIP-1559/2929/3529\uff09",id:"gas-\u8ba1\u8d39\u9000\u6b3e\u4e0e-basefeeeip-155929293529",level:2},{value:"\u8ba1\u8d39\u6a21\u578b",id:"\u8ba1\u8d39\u6a21\u578b",level:3},{value:"\u9000\u6b3e\uff08Refund\uff09",id:"\u9000\u6b3erefund",level:3},{value:"EIP-1559 BaseFee",id:"eip-1559-basefee",level:3},{value:"\u8d39\u7528\u5efa\u8bae",id:"\u8d39\u7528\u5efa\u8bae",level:3}];function d(e){const s={code:"code",h2:"h2",h3:"h3",li:"li",pre:"pre",ul:"ul",...(0,c.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(s.h2,{id:"gas-\u8ba1\u8d39\u9000\u6b3e\u4e0e-basefeeeip-155929293529",children:"Gas \u8ba1\u8d39\u3001\u9000\u6b3e\u4e0e BaseFee\uff08EIP-1559/2929/3529\uff09"}),"\n",(0,r.jsx)(s.h3,{id:"\u8ba1\u8d39\u6a21\u578b",children:"\u8ba1\u8d39\u6a21\u578b"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"\u6307\u4ee4\u6267\u884c\uff1a\u6309 opcode \u6536\u8d39\uff0c\u5185\u5b58\u6269\u5c55\u4e0e\u54c8\u5e0c\u7b49\u6210\u672c\u8f83\u9ad8"}),"\n",(0,r.jsx)(s.li,{children:"\u5b58\u50a8\u5199\u5165\uff1aSSTORE \u6210\u672c\u4e0e\u9000\u6b3e\u4f9d\u8d56\u65e7/\u65b0\u503c\u4e0e\u8bbf\u95ee\u51b7\u70ed"}),"\n",(0,r.jsx)(s.li,{children:"\u5916\u90e8\u8c03\u7528\uff1a\u65b0\u5efa\u8d26\u6237/\u51b7\u8d26\u6237\u8bbf\u95ee\u6709\u989d\u5916\u6210\u672c\uff08EIP-2929\uff09"}),"\n"]}),"\n",(0,r.jsx)(s.h3,{id:"\u9000\u6b3erefund",children:"\u9000\u6b3e\uff08Refund\uff09"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"\u5220\u9664\u5b58\u50a8\u6216 SELFDESTRUCT\uff08\u53d7\u9650\uff09\u53ef\u83b7\u5f97\u9000\u6b3e\uff1bEIP-3529 \u5927\u5e45\u4e0b\u8c03\u9000\u6b3e\u4e0a\u9650"}),"\n",(0,r.jsx)(s.li,{children:"\u5f53\u5757\u5185\u7d2f\u8ba1\u9000\u6b3e\u4e0d\u8d85\u8fc7\u6d88\u8017 gas \u7684\u4e0a\u9650\u6bd4\u4f8b\uff08\u4f8b\u5982 20%\uff09"}),"\n"]}),"\n",(0,r.jsx)(s.h3,{id:"eip-1559-basefee",children:"EIP-1559 BaseFee"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:["\u6bcf\u5757\u6839\u636e ",(0,r.jsx)(s.code,{children:"gasUsed"})," \u76f8\u5bf9 ",(0,r.jsx)(s.code,{children:"target=gasLimit/2"})," \u8c03\u6574 baseFee\uff1a"]}),"\n"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-text",children:"baseFee' = baseFee + floor(baseFee * (gasUsed - target) / target / 8)\n"})}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:["\u7528\u6237\u652f\u4ed8\uff1a",(0,r.jsx)(s.code,{children:"min(maxFeePerGas, baseFee + maxPriorityFeePerGas)"}),"\uff1b\u5176\u4e2d baseFee \u88ab\u9500\u6bc1\uff0c\u5c0f\u8d39\u7ed9\u63d0\u8bae\u8005"]}),"\n"]}),"\n",(0,r.jsx)(s.h3,{id:"\u8d39\u7528\u5efa\u8bae",children:"\u8d39\u7528\u5efa\u8bae"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:["\u53d1\u8d77\u4ea4\u6613\uff1a\u8bbe\u7f6e\u5408\u7406\u7684 ",(0,r.jsx)(s.code,{children:"maxPriorityFeePerGas"}),"\uff08\u53ef\u7528 ",(0,r.jsx)(s.code,{children:"eth_maxPriorityFeePerGas"}),"\uff09\u4e0e\u8db3\u591f\u9ad8\u7684 ",(0,r.jsx)(s.code,{children:"maxFeePerGas"})]}),"\n",(0,r.jsxs)(s.li,{children:["\u6279\u91cf/\u811a\u672c\uff1a\u5229\u7528 ",(0,r.jsx)(s.code,{children:"eth_feeHistory"})," \u4f30\u7b97\u77ed\u671f baseFee \u8d8b\u52bf\uff1b\u5728\u9ad8\u5cf0\u671f\u8003\u8651\u5ef6\u8fdf\u63d0\u4ea4"]}),"\n"]})]})}function h(e={}){const{wrapper:s}={...(0,c.R)(),...e.components};return s?(0,r.jsx)(s,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}}}]);
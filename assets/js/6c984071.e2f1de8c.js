"use strict";(globalThis.webpackChunkdubuqingfeng=globalThis.webpackChunkdubuqingfeng||[]).push([[3613],{28453:(e,n,i)=>{i.d(n,{R:()=>l,x:()=>d});var c=i(96540);const s={},r=c.createContext(s);function l(e){const n=c.useContext(r);return c.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:l(e.components),c.createElement(r.Provider,{value:n},e.children)}},65969:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>t,contentTitle:()=>d,default:()=>h,frontMatter:()=>l,metadata:()=>c,toc:()=>o});const c=JSON.parse('{"id":"Wiki/blockchain/bitcoin/address/address","title":"address","description":"\u5730\u5740\u6982\u89c8","source":"@site/docs/Wiki/blockchain/bitcoin/address/address.md","sourceDirName":"Wiki/blockchain/bitcoin/address","slug":"/Wiki/blockchain/bitcoin/address/","permalink":"/docs/Wiki/blockchain/bitcoin/address/","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Bitcoin","permalink":"/docs/wiki/blockchain/bitcoin"},"next":{"title":"p2pkh","permalink":"/docs/Wiki/blockchain/bitcoin/address/p2pkh"}}');var s=i(74848),r=i(28453);const l={},d=void 0,t={},o=[{value:"\u5730\u5740\u6982\u89c8",id:"\u5730\u5740\u6982\u89c8",level:2},{value:"Base58Check \u6982\u89c8",id:"base58check-\u6982\u89c8",level:3},{value:"Bech32 \u4e0e Bech32m",id:"bech32-\u4e0e-bech32m",level:3},{value:"Witness program \u957f\u5ea6",id:"witness-program-\u957f\u5ea6",level:3},{value:"\u53c2\u8003\u5b9e\u73b0\u8981\u70b9\uff08Go \u4f2a\u4ee3\u7801\uff09",id:"\u53c2\u8003\u5b9e\u73b0\u8981\u70b9go-\u4f2a\u4ee3\u7801",level:3},{value:"\u9009\u578b\u5efa\u8bae",id:"\u9009\u578b\u5efa\u8bae",level:3}];function a(e){const n={code:"code",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",ul:"ul",...(0,r.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.h2,{id:"\u5730\u5740\u6982\u89c8",children:"\u5730\u5740\u6982\u89c8"}),"\n",(0,s.jsx)(n.p,{children:"Bitcoin \u5730\u5740\u662f\u9501\u5b9a\u811a\u672c\u7684\u201c\u4eba\u7c7b\u53ef\u8bfb\u201d\u8868\u8fbe\uff0c\u5e38\u89c1\u4e09\u7c7b\uff1a"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Base58Check\uff08\u4f20\u7edf\uff09\uff1aP2PKH\u3001P2SH"}),"\n",(0,s.jsxs)(n.li,{children:["Bech32\uff08SegWit v0\uff09\uff1aP2WPKH\u3001P2WSH\uff08",(0,s.jsx)(n.code,{children:"bc1q\u2026/tb1q\u2026"}),"\uff09"]}),"\n",(0,s.jsxs)(n.li,{children:["Bech32m\uff08SegWit v1+\uff09\uff1aP2TR\uff08Taproot\uff0c",(0,s.jsx)(n.code,{children:"bc1p\u2026/tb1p\u2026"}),"\uff09"]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"\u5730\u5740\u4e0d\u662f\u8d26\u6237\uff0c\u94fe\u4e0a\u4ecd\u4ee5\u811a\u672c\u4e0e UTXO \u4e3a\u6838\u5fc3\u3002\u5730\u5740\u53ea\u662f\u7279\u5b9a\u811a\u672c\u6a21\u677f\u7684\u7f16\u7801\u3002"}),"\n",(0,s.jsx)(n.h3,{id:"base58check-\u6982\u89c8",children:"Base58Check \u6982\u89c8"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\u7ed3\u6784\uff1a",(0,s.jsx)(n.code,{children:"payload || checksum"})]}),"\n",(0,s.jsxs)(n.li,{children:["payload\uff1a",(0,s.jsx)(n.code,{children:"version || data"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["P2PKH\uff1a",(0,s.jsx)(n.code,{children:"version=0x00(main)/0x6f(test)"}),"\uff0c",(0,s.jsx)(n.code,{children:"data=HASH160(pubkey)"}),"\uff0820B\uff09"]}),"\n",(0,s.jsxs)(n.li,{children:["P2SH\uff1a",(0,s.jsx)(n.code,{children:"version=0x05(main)/0xC4(test)"}),"\uff0c",(0,s.jsx)(n.code,{children:"data=HASH160(redeemScript)"}),"\uff0820B\uff09"]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["checksum\uff1a",(0,s.jsx)(n.code,{children:"SHA256(SHA256(payload))[:4]"})]}),"\n",(0,s.jsx)(n.li,{children:"\u7f16\u7801\uff1aBase58\uff0c\u4e0d\u542b 0/O/I/l \u7b49\u6613\u6df7\u5b57\u7b26"}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"bech32-\u4e0e-bech32m",children:"Bech32 \u4e0e Bech32m"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\u7ec4\u6210\uff1a",(0,s.jsx)(n.code,{children:"hrp '1' data+checksum"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["hrp\uff1a\u4e3b\u7f51 ",(0,s.jsx)(n.code,{children:"bc"}),"\uff0c\u6d4b\u8bd5\u7f51 ",(0,s.jsx)(n.code,{children:"tb"}),"\uff0cregtest ",(0,s.jsx)(n.code,{children:"bcrt"})]}),"\n",(0,s.jsxs)(n.li,{children:["data\uff1a",(0,s.jsx)(n.code,{children:"witness_version(5-bit) || program(convertbits(8\u21925))"})]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.li,{children:"Bech32\uff08BIP173\uff09\uff1a\u7528\u4e8e v0 \u5730\u5740\uff08P2WPKH 20B\u3001P2WSH 32B\uff09"}),"\n",(0,s.jsx)(n.li,{children:"Bech32m\uff08BIP350\uff09\uff1a\u7528\u4e8e v1+ \u5730\u5740\uff08Taproot P2TR 32B\uff09"}),"\n",(0,s.jsx)(n.li,{children:"\u5e38\u89c1\u9677\u9631\uff1av1 \u5730\u5740\u5fc5\u987b\u4f7f\u7528 Bech32m \u6821\u9a8c\u5e38\u91cf"}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"witness-program-\u957f\u5ea6",children:"Witness program \u957f\u5ea6"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"v0\uff1a\u957f\u5ea6\u53ea\u80fd\u4e3a 20\uff08WPKH\uff09\u6216 32\uff08WSH\uff09"}),"\n",(0,s.jsx)(n.li,{children:"v1\uff08Taproot\uff09\uff1a\u957f\u5ea6 32\uff08x-only \u516c\u94a5\uff09"}),"\n",(0,s.jsx)(n.li,{children:"\u5176\u5b83\u7248\u672c\u7559\u4f5c\u672a\u6765\u6269\u5c55"}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"\u53c2\u8003\u5b9e\u73b0\u8981\u70b9go-\u4f2a\u4ee3\u7801",children:"\u53c2\u8003\u5b9e\u73b0\u8981\u70b9\uff08Go \u4f2a\u4ee3\u7801\uff09"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-go",children:'// Base58Check\nfunc Base58Check(version byte, data []byte) string {\n    payload := append([]byte{version}, data...)\n    sum := Hash256(payload)[:4]\n    return b58encode(append(payload, sum...))\n}\n\n// Bech32(m)\uff08\u4ec5\u5c55\u793a\u6846\u67b6\uff09\nfunc EncodeSegwit(hrp string, ver byte, program []byte, bech32m bool) (string, error) {\n    if ver == 0 && !(len(program) == 20 || len(program) == 32) { return "", Err }\n    if ver > 0 && !bech32m { return "", Err }\n    data := append([]byte{ver}, convertBits(program, 8, 5, true)...)\n    return bech32Encode(hrp, data, bech32m), nil\n}\n'})}),"\n",(0,s.jsx)(n.h3,{id:"\u9009\u578b\u5efa\u8bae",children:"\u9009\u578b\u5efa\u8bae"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"\u94b1\u5305\u5916\u53d1\uff1a\u9996\u9009 v0 P2WPKH\uff08Bech32\uff09\u6216 v1 P2TR\uff08Bech32m\uff09"}),"\n",(0,s.jsxs)(n.li,{children:["\u517c\u5bb9\u6027\u8003\u8651\uff08\u8001\u94b1\u5305\uff09\uff1a\u53ef\u7528 P2SH-P2WPKH\uff08\u4ee5 ",(0,s.jsx)(n.code,{children:"3"})," \u5f00\u5934\uff09"]}),"\n",(0,s.jsx)(n.li,{children:"\u591a\u7b7e\uff1a\u4f18\u5148 WSH/Tapscript\uff0c\u914d\u5408\u63cf\u8ff0\u7b26\u4e0e Miniscript \u4ee5\u4fbf\u5ba1\u8ba1"}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(a,{...e})}):a(e)}}}]);
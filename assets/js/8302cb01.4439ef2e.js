"use strict";(self.webpackChunkdubuqingfeng=self.webpackChunkdubuqingfeng||[]).push([[1912],{86249:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>c,contentTitle:()=>a,default:()=>d,frontMatter:()=>o,metadata:()=>s,toc:()=>l});const s=JSON.parse('{"id":"Wiki/programming/nodejs/toolchain/testing","title":"testing","description":"\u6d4b\u8bd5\u4e0e\u8986\u76d6\u7387","source":"@site/docs/Wiki/programming/nodejs/toolchain/testing.md","sourceDirName":"Wiki/programming/nodejs/toolchain","slug":"/Wiki/programming/nodejs/toolchain/testing","permalink":"/docs/Wiki/programming/nodejs/toolchain/testing","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"package-managers","permalink":"/docs/Wiki/programming/nodejs/toolchain/package-managers"},"next":{"title":"http-server","permalink":"/docs/Wiki/programming/nodejs/web/http-server"}}');var r=t(74848),i=t(28453);const o={},a=void 0,c={},l=[{value:"\u6d4b\u8bd5\u4e0e\u8986\u76d6\u7387",id:"\u6d4b\u8bd5\u4e0e\u8986\u76d6\u7387",level:3},{value:"\u8981\u70b9",id:"\u8981\u70b9",level:4},{value:"\u793a\u4f8b\uff1aHTTP \u63a5\u53e3\u6d4b\u8bd5\uff08Supertest + Jest\uff09",id:"\u793a\u4f8bhttp-\u63a5\u53e3\u6d4b\u8bd5supertest--jest",level:4},{value:"\u793a\u4f8b\uff1aTestcontainers \u542f\u52a8 PostgreSQL",id:"\u793a\u4f8btestcontainers-\u542f\u52a8-postgresql",level:4}];function p(e){const n={a:"a",code:"code",h3:"h3",h4:"h4",li:"li",p:"p",pre:"pre",ul:"ul",...(0,i.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.h3,{id:"\u6d4b\u8bd5\u4e0e\u8986\u76d6\u7387",children:"\u6d4b\u8bd5\u4e0e\u8986\u76d6\u7387"}),"\n",(0,r.jsxs)(n.p,{children:["\u5355\u5143/\u96c6\u6210/\u7aef\u5230\u7aef\u6d4b\u8bd5\u4e0e\u8986\u76d6\u7387\u5ea6\u91cf\uff0c\u7ed3\u5408 Mock/\u5bb9\u5668\u5316\u4f9d\u8d56\u3002\u66f4\u591a\u5b9e\u8df5\u89c1 JavaScript \u7ae0\u8282\u7684",(0,r.jsx)(n.a,{href:"/docs/Wiki/programming/javascript/toolchain/testing",children:"\u6d4b\u8bd5\u4e0e\u8986\u76d6\u7387\uff08Jest/Vitest\uff09"}),"\u3002"]}),"\n",(0,r.jsx)(n.h4,{id:"\u8981\u70b9",children:"\u8981\u70b9"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"\u5de5\u5177\uff1aJest/Vitest\u3001Playwright\u3001Supertest\uff1b"}),"\n",(0,r.jsx)(n.li,{children:"\u9694\u79bb\uff1aTestcontainers/Docker Compose\uff1b"}),"\n",(0,r.jsx)(n.li,{children:"\u8986\u76d6\u7387\uff1a\u9608\u503c\u8bbe\u5b9a\u3001\u53d8\u66f4\u8303\u56f4\u6d4b\u8bd5\uff1b"}),"\n",(0,r.jsx)(n.li,{children:"\u5e76\u53d1\u4e0e\u8d44\u6e90\uff1aWorker \u6570\u3001\u5185\u5b58\u4e0e\u7aef\u53e3\u7ba1\u7406\u3002"}),"\n"]}),"\n",(0,r.jsx)(n.h4,{id:"\u793a\u4f8bhttp-\u63a5\u53e3\u6d4b\u8bd5supertest--jest",children:"\u793a\u4f8b\uff1aHTTP \u63a5\u53e3\u6d4b\u8bd5\uff08Supertest + Jest\uff09"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"import request from 'supertest';\nimport { app } from '../src/app';\n\nit('GET /ping', async () => {\n  await request(app).get('/ping').expect(200).expect({ pong: 'it works' });\n});\n"})}),"\n",(0,r.jsx)(n.h4,{id:"\u793a\u4f8btestcontainers-\u542f\u52a8-postgresql",children:"\u793a\u4f8b\uff1aTestcontainers \u542f\u52a8 PostgreSQL"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"import { PostgreSqlContainer } from '@testcontainers/postgresql';\n\nlet container;\nbeforeAll(async () => {\n  container = await new PostgreSqlContainer().start();\n  process.env.DATABASE_URL = container.getConnectionUri();\n});\nafterAll(async () => container.stop());\n"})}),"\n",(0,r.jsx)(n.p,{children:"\u7b56\u7565\uff1aE2E \u8986\u76d6\u5173\u952e\u8def\u5f84\uff0c\u5951\u7ea6\u6d4b\u8bd5\u4fdd\u8bc1\u670d\u52a1\u95f4\u534f\u8bae\u7a33\u5b9a\uff1b\u5176\u4f59\u4ee5\u96c6\u6210\u6d4b\u8bd5\u4e3a\u4e3b\u3001\u5355\u6d4b\u4e3a\u57fa\u7840\u3002"})]})}function d(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(p,{...e})}):p(e)}},28453:(e,n,t)=>{t.d(n,{R:()=>o,x:()=>a});var s=t(96540);const r={},i=s.createContext(r);function o(e){const n=s.useContext(i);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:o(e.components),s.createElement(i.Provider,{value:n},e.children)}}}]);
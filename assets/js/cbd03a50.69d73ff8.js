"use strict";(self.webpackChunkdubuqingfeng=self.webpackChunkdubuqingfeng||[]).push([[7283],{11133:(n,e,r)=>{r.r(e),r.d(e,{assets:()=>a,contentTitle:()=>o,default:()=>d,frontMatter:()=>t,metadata:()=>i,toc:()=>c});const i=JSON.parse('{"id":"Wiki/programming/rust/language/ownership-borrowing","title":"ownership-borrowing","description":"\u6240\u6709\u6743\u3001\u501f\u7528\u4e0e\u751f\u547d\u5468\u671f","source":"@site/docs/Wiki/programming/rust/language/ownership-borrowing.md","sourceDirName":"Wiki/programming/rust/language","slug":"/Wiki/programming/rust/language/ownership-borrowing","permalink":"/docs/Wiki/programming/rust/language/ownership-borrowing","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"c-ffi","permalink":"/docs/Wiki/programming/rust/ffi/c-ffi"},"next":{"title":"traits-generics","permalink":"/docs/Wiki/programming/rust/language/traits-generics"}}');var s=r(74848),l=r(28453);const t={},o=void 0,a={},c=[{value:"\u6240\u6709\u6743\u3001\u501f\u7528\u4e0e\u751f\u547d\u5468\u671f",id:"\u6240\u6709\u6743\u501f\u7528\u4e0e\u751f\u547d\u5468\u671f",level:3},{value:"\u6838\u5fc3\u89c4\u5219",id:"\u6838\u5fc3\u89c4\u5219",level:4},{value:"\u6240\u6709\u6743\u8f6c\u79fb\uff08Move\uff09",id:"\u6240\u6709\u6743\u8f6c\u79fbmove",level:4},{value:"\u501f\u7528\u4e0e\u53ef\u53d8\u501f\u7528",id:"\u501f\u7528\u4e0e\u53ef\u53d8\u501f\u7528",level:4},{value:"\u751f\u547d\u5468\u671f\u6ce8\u89e3\uff08\u5e38\u89c1\u4e8e\u51fd\u6570/\u7ed3\u6784\u4f53\uff09",id:"\u751f\u547d\u5468\u671f\u6ce8\u89e3\u5e38\u89c1\u4e8e\u51fd\u6570\u7ed3\u6784\u4f53",level:4},{value:"\u4e0e Go \u7684\u5dee\u5f02\u901f\u89c8",id:"\u4e0e-go-\u7684\u5dee\u5f02\u901f\u89c8",level:4}];function u(n){const e={code:"code",h3:"h3",h4:"h4",li:"li",pre:"pre",ul:"ul",...(0,l.R)(),...n.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(e.h3,{id:"\u6240\u6709\u6743\u501f\u7528\u4e0e\u751f\u547d\u5468\u671f",children:"\u6240\u6709\u6743\u3001\u501f\u7528\u4e0e\u751f\u547d\u5468\u671f"}),"\n",(0,s.jsx)(e.h4,{id:"\u6838\u5fc3\u89c4\u5219",children:"\u6838\u5fc3\u89c4\u5219"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"\u6bcf\u4e2a\u503c\u6709\u4e14\u4ec5\u6709\u4e00\u4e2a\u6240\u6709\u8005\uff08owner\uff09\u3002"}),"\n",(0,s.jsx)(e.li,{children:"\u4f5c\u7528\u57df\u7ed3\u675f\uff0c\u6240\u6709\u8005\u79bb\u5f00\uff0c\u503c\u88ab\u4e22\u5f03\uff08drop\uff09\u3002"}),"\n",(0,s.jsxs)(e.li,{children:["\u901a\u8fc7\u501f\u7528\uff08",(0,s.jsx)(e.code,{children:"&T"}),"\u3001",(0,s.jsx)(e.code,{children:"&mut T"}),"\uff09\u53ef\u5728\u4e0d\u8f6c\u79fb\u6240\u6709\u6743\u4e0b\u8bbf\u95ee\u503c\uff1b\u540c\u4e00\u65f6\u523b\u5141\u8bb8\u591a\u4e2a\u4e0d\u53ef\u53d8\u501f\u7528\u6216\u4e00\u4e2a\u53ef\u53d8\u501f\u7528\u3002"]}),"\n",(0,s.jsx)(e.li,{children:"\u751f\u547d\u5468\u671f\u7528\u4e8e\u63cf\u8ff0\u5f15\u7528\u6709\u6548\u8303\u56f4\uff0c\u4fdd\u8bc1\u4e0d\u60ac\u5782\uff08dangling\uff09\u3002"}),"\n"]}),"\n",(0,s.jsx)(e.h4,{id:"\u6240\u6709\u6743\u8f6c\u79fbmove",children:"\u6240\u6709\u6743\u8f6c\u79fb\uff08Move\uff09"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-rust",children:'fn main() {\n    let s = String::from("hello");\n    let t = s;           // \u6240\u6709\u6743\u79fb\u52a8\uff0cs \u4e0d\u518d\u53ef\u7528\n    // println!("{}", s); // \u7f16\u8bd1\u9519\u8bef\uff1as \u5df2\u88ab move\n    println!("{}", t);\n}\n'})}),"\n",(0,s.jsx)(e.h4,{id:"\u501f\u7528\u4e0e\u53ef\u53d8\u501f\u7528",children:"\u501f\u7528\u4e0e\u53ef\u53d8\u501f\u7528"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-rust",children:'fn len(v: &Vec<i32>) -> usize { v.len() }\n\nfn push_one(v: &mut Vec<i32>) { v.push(1); }\n\nfn main() {\n    let mut v = vec![1,2,3];\n    let n = len(&v);           // \u4e0d\u53ef\u53d8\u501f\u7528\uff0c\u53ef\u5e76\u53d1\u591a\u6b21\n    println!("len={}", n);\n\n    push_one(&mut v);          // \u53ef\u53d8\u501f\u7528\uff0c\u540c\u4e00\u65f6\u523b\u4ec5\u80fd\u5b58\u5728\u4e00\u4e2a\n    println!("{:?}", v);\n}\n'})}),"\n",(0,s.jsx)(e.h4,{id:"\u751f\u547d\u5468\u671f\u6ce8\u89e3\u5e38\u89c1\u4e8e\u51fd\u6570\u7ed3\u6784\u4f53",children:"\u751f\u547d\u5468\u671f\u6ce8\u89e3\uff08\u5e38\u89c1\u4e8e\u51fd\u6570/\u7ed3\u6784\u4f53\uff09"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-rust",children:"// \u8fd4\u56de\u4e24\u4e2a\u5b57\u7b26\u4e32\u5207\u7247\u8f83\u957f\u8005\u7684\u5f15\u7528\nfn longer<'a>(a: &'a str, b: &'a str) -> &'a str {\n    if a.len() >= b.len() { a } else { b }\n}\n\nstruct Holder<'a> { s: &'a str }\n\nfn main() {\n    let s1 = String::from(\"abc\");\n    let s2 = String::from(\"abcd\");\n    let r = longer(&s1, &s2);\n    let h = Holder { s: r };\n    println!(\"{}\", h.s);\n}\n"})}),"\n",(0,s.jsx)(e.h4,{id:"\u4e0e-go-\u7684\u5dee\u5f02\u901f\u89c8",children:"\u4e0e Go \u7684\u5dee\u5f02\u901f\u89c8"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"Rust \u901a\u8fc7\u6240\u6709\u6743/\u501f\u7528\u5728\u7f16\u8bd1\u671f\u4fdd\u8bc1\u5185\u5b58\u5b89\u5168\uff1bGo \u4f9d\u8d56 GC \u8fd0\u884c\u671f\u56de\u6536\u3002"}),"\n",(0,s.jsx)(e.li,{children:"Rust \u5f15\u7528\u6709\u4e25\u683c\u7684\u53ef\u53d8\u6027\u4e0e\u522b\u540d\u89c4\u5219\uff1bGo \u6307\u9488\u65e0\u7f16\u8bd1\u671f\u522b\u540d\u9650\u5236\u4f46\u9700\u8fd0\u884c\u671f\u6ce8\u610f\u6570\u636e\u7ade\u4e89\u3002"}),"\n"]})]})}function d(n={}){const{wrapper:e}={...(0,l.R)(),...n.components};return e?(0,s.jsx)(e,{...n,children:(0,s.jsx)(u,{...n})}):u(n)}},28453:(n,e,r)=>{r.d(e,{R:()=>t,x:()=>o});var i=r(96540);const s={},l=i.createContext(s);function t(n){const e=i.useContext(l);return i.useMemo((function(){return"function"==typeof n?n(e):{...e,...n}}),[e,n])}function o(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(s):n.components||s:t(n.components),i.createElement(l.Provider,{value:e},n.children)}}}]);
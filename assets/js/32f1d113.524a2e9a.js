"use strict";(self.webpackChunkdubuqingfeng=self.webpackChunkdubuqingfeng||[]).push([[266],{62615:(n,e,t)=>{t.r(e),t.d(e,{assets:()=>u,contentTitle:()=>o,default:()=>p,frontMatter:()=>i,metadata:()=>r,toc:()=>d});const r=JSON.parse('{"id":"Wiki/programming/cpp/concurrency/future-promise-async","title":"future-promise-async","description":"\u5f02\u6b65\u4e0e\u671f\u7ea6 std::async","source":"@site/docs/Wiki/programming/cpp/concurrency/future-promise-async.md","sourceDirName":"Wiki/programming/cpp/concurrency","slug":"/Wiki/programming/cpp/concurrency/future-promise-async","permalink":"/docs/Wiki/programming/cpp/concurrency/future-promise-async","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"condition-variable","permalink":"/docs/Wiki/programming/cpp/concurrency/condition-variable"},"next":{"title":"lock-free","permalink":"/docs/Wiki/programming/cpp/concurrency/lock-free"}}');var c=t(74848),s=t(28453);const i={},o=void 0,u={},d=[{value:"\u5f02\u6b65\u4e0e\u671f\u7ea6 std::future/std::promise/std::async",id:"\u5f02\u6b65\u4e0e\u671f\u7ea6-stdfuturestdpromisestdasync",level:3}];function a(n){const e={code:"code",h3:"h3",p:"p",pre:"pre",...(0,s.R)(),...n.components};return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(e.h3,{id:"\u5f02\u6b65\u4e0e\u671f\u7ea6-stdfuturestdpromisestdasync",children:"\u5f02\u6b65\u4e0e\u671f\u7ea6 std::future/std::promise/std::async"}),"\n",(0,c.jsxs)(e.p,{children:["\u7528 ",(0,c.jsx)(e.code,{children:"std::promise"})," \u4ea7\u751f\u503c\uff0c\u7528 ",(0,c.jsx)(e.code,{children:"std::future"})," \u7b49\u5f85\u7ed3\u679c\uff1b",(0,c.jsx)(e.code,{children:"std::async"})," \u5c01\u88c5\u5f02\u6b65\u4efb\u52a1\u3002"]}),"\n",(0,c.jsx)(e.pre,{children:(0,c.jsx)(e.code,{className:"language-cpp",children:"#include <future>\n#include <thread>\n\nint compute() { return 42; }\n\nint main() {\n  // async \u53ef\u5e76\u884c\u6216\u5ef6\u8fdf\u6267\u884c\uff0c\u7b56\u7565\u7531\u5b9e\u73b0\u51b3\u5b9a\n  auto f = std::async(std::launch::async, compute);\n  int v = f.get(); // \u7b49\u5f85\u7ed3\u679c\n}\n"})}),"\n",(0,c.jsxs)(e.p,{children:[(0,c.jsx)(e.code,{children:"promise/future"})," \u793a\u4f8b\uff1a"]}),"\n",(0,c.jsx)(e.pre,{children:(0,c.jsx)(e.code,{className:"language-cpp",children:"#include <future>\n\nint main() {\n  std::promise<int> p;\n  std::future<int> f = p.get_future();\n  std::thread t([&]{ p.set_value(7); });\n  int v = f.get();\n  t.join();\n}\n"})}),"\n",(0,c.jsxs)(e.p,{children:["\u6ce8\u610f\uff1a\u907f\u514d ",(0,c.jsx)(e.code,{children:"std::async"})," \u9ed8\u8ba4\u7b56\u7565\u5f15\u5165\u7684\u540c\u6b65/\u5ef6\u8fdf\u4e0d\u786e\u5b9a\u6027\uff0c\u5fc5\u8981\u65f6\u663e\u5f0f\u4f7f\u7528 ",(0,c.jsx)(e.code,{children:"std::launch::async"}),"\u3002"]})]})}function p(n={}){const{wrapper:e}={...(0,s.R)(),...n.components};return e?(0,c.jsx)(e,{...n,children:(0,c.jsx)(a,{...n})}):a(n)}},28453:(n,e,t)=>{t.d(e,{R:()=>i,x:()=>o});var r=t(96540);const c={},s=r.createContext(c);function i(n){const e=r.useContext(s);return r.useMemo((function(){return"function"==typeof n?n(e):{...e,...n}}),[e,n])}function o(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(c):n.components||c:i(n.components),r.createElement(s.Provider,{value:e},n.children)}}}]);